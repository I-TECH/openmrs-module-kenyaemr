<!--
  ~ The contents of this file are subject to the OpenMRS Public License
  ~ Version 1.0 (the "License"); you may not use this file except in
  ~ compliance with the License. You may obtain a copy of the License at
  ~ http://license.openmrs.org
  ~
  ~ Software distributed under the License is distributed on an "AS IS"
  ~ basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
  ~ License for the specific language governing rights and limitations
  ~ under the License.
  ~
  ~ Copyright (C) OpenMRS, LLC.  All Rights Reserved.
-->
<!--
Green Card follow-up visit form
-->
<htmlform>

    <style type="text/css">


            table.right-aligned-first td:first-child {
            text-align: right;
        }
        table.link {
            text-align: right;
            border:2px solid darkgray;
            padding: inherit;
        }
        .show-links {
            text-align: right;
            border:2px solid darkgray;
            padding: inherit;

        }
    </style>

    <script type="text/javascript" src="../moduleResources/kenyaemr/scripts/moment.js"></script>

    <script type="text/javascript">

        var bmi = null;
        var SELF = 978;
        function onWeightOrHeightChange() {
            var display = '';
            var weightKg = parseFloat(getValue('weight.value'));
            var heightM = parseFloat(getValue('height.value')) / 100;
            if (!isNaN(weightKg) &amp;&amp; !isNaN(heightM)) {
                 bmi = weightKg / (heightM * heightM);
                if (isNaN(bmi) || bmi &lt; 10 || bmi &gt; 50) {
                    display = 'Abnormal value. Were height and height entered correctly?';
                }
                else {
                    display = bmi.toFixed(2);
                }
            }
            //set nutritional status and bmi
            jq('#calculated-bmi').html(display);
            if (bmi &lt; 16) {
                jq("#nutritional-status input[value=163302]").prop("checked", true);
            } else if (bmi &gt; 16 &amp;&amp; bmi &lt; 18.5) {
                jq("#nutritional-status input[value=163303]").prop("checked", true);
            } else if (bmi &gt; 18.5 &amp;&amp; bmi &lt; 25) {
                jq("#nutritional-status input[value=1115]").prop("checked", true);
            } else if (bmi &gt; 25) {
                jq("#nutritional-status input[value=114413]").prop("checked", true);
            }

        }
        function displayRecentBmi() {
            var weightKg = "<lookup expression="fn.latestObs(5089).valueNumeric"/>"
            var heightM = ("<lookup expression="fn.latestObs(5090).valueNumeric"/>")/100
            var bmi = '';
            var recent_bmi ='';
            if (!isNaN(weightKg) &amp;&amp; !isNaN(heightM)) {
                bmi = weightKg / (heightM * heightM);
                recent_bmi= bmi.toFixed(2);
                jq('#recent-calculated-bmi').html(recent_bmi);

                //set recent nutritional status from recent bmi
                if (recent_bmi &lt; 16) {
                    jq("#nutritional-status input[value=163302]").prop("checked", true);
                } else if (recent_bmi &gt; 16 &amp;&amp; recent_bmi &lt; 18.5) {
                    jq("#nutritional-status input[value=163303]").prop("checked", true);
                } else if (recent_bmi &gt; 18.5 &amp;&amp; recent_bmi &lt; 25) {
                    jq("#nutritional-status input[value=1115]").prop("checked", true);
                } else if (recent_bmi &gt; 25) {
                    jq("#nutritional-status input[value=114413]").prop("checked", true);

                }
            }
        }
        function onLmpChange() {
            jq('#pregnancyOption :input').prop('disabled', false);

        }
        function onPersonPresentChange() {
            if (getValue('person-present.value') == SELF) {
                jq('.patient-details :input').prop('disabled', false);
            } else {
                jq('.patient-details :input').prop('disabled', true);
            }
        }
        function onRecordIPTOutcome() {
            jq("#tbl-ipt-outcome").toggle();
        }

        function onParityChange() {
            var gravida = '';
            var parityTerm = parseInt(getValue('parity-term.value'));
            var parityAbortion = parseInt(getValue('parity-abortion.value'));
           if (!isNaN(parityTerm) &amp;&amp; !isNaN(parityAbortion)) {
                gravida = parityTerm + parityAbortion + 1;
                getField('gravida.value').val(gravida);
                }
        }
        var generalExamSelected = function(){
            var val = jq(this).val();
            var generalExamsChecked = jq("#general-exam-findings input:checkbox:checked");

            if(val == 1107 &amp;&amp; generalExamsChecked.length ==1){

                jq("#general-exam-findings input[type=checkbox]").prop("disabled",true);
                jq(this).prop("disabled",false);

            }else {


                jq("#general-exam-findings input[type=checkbox]").prop("disabled",false);
                jq("#general-exam-findings input[value=1107]").prop("disabled",true);
            }
            if(generalExamsChecked.length ==0){
                jq("#general-exam-findings input[value=1107]").prop("disabled",false);

            }
        }
        var complaintSelected = function() {

            var val = jq(this).val();
            if (val == 1066){
                jq("#tbl-complaints-today").hide();

            }else {
                jq("#tbl-complaints-today").show();
            }
        }
        var complaintDurationInput = function() {


            var val = jq(this).val();
            var encounterDate = new Date(getValue('encounter-date.value'));
            var complaint_date= new Date(encounterDate.getTime()-(val*24*60*60*1000)).toISOString().substr(0,10);
            var formattedComplaintDate=moment(moment(complaint_date, 'YYYY-MM-DD').toDate()).format('DD-MMM-YYYY');
            getField('complaint-date.value').val(formattedComplaintDate);

        }
        var complaintDateInput = function() {

            var complaintDate = jq(this).val();
            var encounterDate = new Date(getValue('encounter-date.value'));
            console.log("Complaint date" + complaintDate);
            console.log("Encounter date" + encounterDate);

            var formattedComplaintDate=moment(moment(complaintDate, 'DD-MMM-YYYY').toDate()).format('DD-MM-YYYY');
            console.log("Formatted complaint date " +formattedComplaintDate);



           // var date_diff=new Date(encounterDate).getTime()/1000-new Date(complaintDate).getTime() / 1000
            //var formattedComplaintDate=moment(moment(complaint_date, 'YYYY-MM-DD').toDate()).format('DD-MMM-YYYY');
           // console.log("Date diff in unix " + date_diff);
            //getField('complaint-date.value').val(formattedComplaintDate);

        }

        var adverseReactionSelected = function() {
            var val = jq(this).val();
            if (val == 1066){
                jq("#tbl-adverse-reactions").hide();

            }else {
            jq("#tbl-adverse-reactions").show();
            }
        }
        var knownAllergiesSelected = function() {
            var val = jq(this).val();
            if (val == 1066){
                jq("#tbl-known-allergies").hide();

            }else {
                jq("#tbl-known-allergies").show();
            }
        }

        var systemsReviewSelected = function() {
            var val = jq(this).val();
            if (val == 1066){
                jq("#tbl-systems-review").hide();

            }else {
                jq("#tbl-systems-review").show();
            }
        }
        var chronicIllnessesSelected = function() {
            var val = jq(this).val();
            if (val == 1066){
                jq("#tbl-chronic-illness").hide();

            }else {
                jq("#tbl-chronic-illness").show();
            }
        }

        var screenedStiSelected = function() {
            var val = jq(this).val();
            if (val == 703){
                jq("#tbl-partner-notification").show();

            }else {
                jq("#tbl-partner-notification").hide();
            }
        }
        var onAntiTbDrugs = function(){
            var val = jq(this).val();
            var actionTakenTab = jq('#action-taken');
            var iptClientWorkupTab = jq('#ipt-client-workup');
            var iptFollowup = jq('#ipt-followup');
            var tbScreeningQuestionsTab = jq("#tb-screening-tab");
            var iptInitiationTab = jq('#ipt-initiation');
            everOnIPTSelected = null;
            patientCurrentlyOnIPT = null;
            if(val == 1066) {
                jq('input[type=radio].on-ipt').prop("disabled", false);
            } else {
                jq('input[type=radio].on-ipt').prop("disabled", true);
                jq('input[type=radio].on-ipt').prop("checked", false);
                jq("#tb-screening-result").hide();
                jq("#tb-screening-tab").hide();
                jq("#ever-on-ipt").hide();
                clearRadios(jq("#ever-on-ipt"));
                actionTakenTab.hide();
                clearRadios(actionTakenTab);
                iptClientWorkupTab.hide()
                clearRadios(iptClientWorkupTab);
                iptFollowup.hide();
                clearRadios(iptFollowup);
                tbScreeningQuestionsTab.hide();
                clearRadios(tbScreeningQuestionsTab);
               iptInitiationTab.hide();

            }
        }

        var onIPT = function(){
            var val = jq(this).val();
            patientCurrentlyOnIPT = val;
            everOnIPTSelected = null;
            var actionTakenTab = jq('#action-taken');
            var iptClientWorkupTab = jq('#ipt-client-workup');
            var iptFollowup = jq('#ipt-followup');
            var tbScreeningQuestionsTab = jq("#tb-screening-tab");
            var iptInitiationTab = jq('#ipt-initiation');
            var tbScreeningResult = jq("#tb-screening-result");
            if(val == 1066) {

                jq("#ever-on-ipt").show();
                jq("#ipt-uptake").hide();
                iptFollowup.hide();
                actionTakenTab.hide();
                tbScreeningQuestionsTab.hide();
                tbScreeningResult.hide();

                //clear radios in hidden sections
                clearRadios(iptFollowup);
                clearRadios(actionTakenTab);
                clearRadios(tbScreeningQuestionsTab);
                clearRadios(tbScreeningResult);

            } else {
                jq("#ever-on-ipt").hide();
                clearRadios(jq("#ever-on-ipt"));
                jq("#ipt-followup").show();
                tbScreeningQuestionsTab.show();
                jq("#tb-screening-result").show();
                iptClientWorkupTab.hide();
                actionTakenTab.hide();
                jq("#ipt-uptake").show();
                iptInitiationTab.hide();


                //clear radios
                clearRadios(iptClientWorkupTab);
                clearRadios(actionTakenTab);
            }
        }

        var ageGroup = function () {
            pAge = parseInt('<lookup expression="patient.age"/>');
            if (pAge &gt; 15) {
                whoChild.style.display='none';
            }
            if (pAge &lt; 15) {
                whoAdult.style.display='none';
            }
        }

        var everOnIPT = function () {
            var val = jq(this).val();
            everOnIPTSelected = val;
            var tbScreeningResultTab = jq("#tb-screening-result");
            var tbScreeningTab = jq("#tb-screening-tab");
            var iptClientWorkupTab = jq('#ipt-client-workup');
            var actionTakenTab = jq('#action-taken');
            var iptInitiationTab = jq('#ipt-initiation');
            if(val == 1066) {
                // show TB screening, TB results and IPT workup forms
                tbScreeningTab.show();
                tbScreeningResultTab.show();
                iptClientWorkupTab.show();
                actionTakenTab.hide();
                //clear radios
                clearRadios(tbScreeningTab);
                clearRadios(actionTakenTab);

            } else {
                // show TB screening and TB result forms
                iptClientWorkupTab.hide();
                tbScreeningTab.show();
                tbScreeningResultTab.show();
                actionTakenTab.hide();
                iptInitiationTab.hide();

                //clear radios for hidden sections
                clearRadios(iptClientWorkupTab);
                clearRadios(tbScreeningTab);
                clearRadios(actionTakenTab);

            }
        }
        //Resulting TB status for Ordered test
        var populationTypeSelected = function () {
            var val = jq(this).val();
            if (val == 1066 ){
                jq("#key-population").show();

            }else{
                jq("#key-population").hide();

            }
        }
        var testOrdered  = function () {
            var val = jq(this).val();
            var testOrderedChecked = jq("#tb-test-ordered input:checkbox:checked");
            var sputumSmear = getValue("sputum-smear-action.value");
            var geneXpert = getField("genexpert-action.value").val();
            var referral = getValue("referral-action.value");
            var clinicalDiagnosis = getValue("clinical-diagnosis-action.value");
            var xray = getValue("chest-xray-action.value");

             //TB
            if(clinicalDiagnosis ==703) {
                jq("#tb-result-status input[value=1660]").prop("checked", false);
                jq("#tb-result-status input[value=142177]").prop("checked", false);
                jq("#tb-result-status input[value=1662]").prop("checked", true);
                jq('#ipt-client-workup').hide();

            }
              //No signs
            if((clinicalDiagnosis !=703) &amp;&amp; (testOrderedChecked.length &lt; 0 || referral !=1065 || sputumSmear !=703 || xray !=152526 || geneXpert !=162203 || geneXpert !=162204 || geneXpert !=164104)){
                jq("#tb-result-status input[value=1660]").prop("checked", true);
                jq("#tb-result-status input[value=142177]").prop("checked", false);
                jq("#tb-result-status input[value=1662]").prop("checked", false);
                jq('#ipt-client-workup').hide();
            }
            //No signs with normal/negative Tests results
            if((clinicalDiagnosis !=703) &amp;&amp; ((testOrderedChecked.length &gt; 0 &amp;&amp; sputumSmear ==664) || (testOrderedChecked.length &gt; 0 &amp;&amp; xray ==1115) || (testOrderedChecked.length &gt; 0 &amp;&amp; (geneXpert !=162203 || geneXpert !=162204 || geneXpert !=164104)))){
                jq("#tb-result-status input[value=1660]").prop("checked", true);
                jq("#tb-result-status input[value=142177]").prop("checked", false);
                jq("#tb-result-status input[value=1662]").prop("checked", false);
                jq('#ipt-client-workup').hide();
            }
            //Presumed TB  with abnormal/positive Tests results
            if((clinicalDiagnosis !=703) &amp;&amp; ((testOrderedChecked.length &gt; 0 &amp;&amp; sputumSmear ==703) || (testOrderedChecked.length &gt; 0 &amp;&amp; xray ==152526) || (testOrderedChecked.length &gt; 0 &amp;&amp; (geneXpert ==162203 || geneXpert ==162204 || geneXpert ==164104)))){
                jq("#tb-result-status input[value=1660]").prop("checked", true);
                jq("#tb-result-status input[value=142177]").prop("checked", false);
                jq("#tb-result-status input[value=1662]").prop("checked", false);
                jq('#ipt-client-workup').hide();
            }
            //Presumed TB
            if((clinicalDiagnosis !=703) &amp;&amp; (testOrderedChecked.length &gt; 0 || referral ==1065 || sputumSmear ==703 || xray ==152526 || geneXpert ==162203 || geneXpert ==162204 || geneXpert ==164104)){
                jq("#tb-result-status input[value=1660]").prop("checked", false);
                jq("#tb-result-status input[value=142177]").prop("checked", true);
                jq("#tb-result-status input[value=1662]").prop("checked", false);
                jq('#ipt-client-workup').hide();
            }
        }


        //Resulting TB status for Action Positive Sputum smear
        var sputumSmearAction  = function () {
            var sputumSmear = getValue("sputum-smear-action.value");
            var geneXpert = getField("genexpert-action.value").val();
            var clinicalDiagnosis = getValue("clinical-diagnosis-action.value");
            var xray = getValue("chest-xray-action.value");
            var referral = getValue("referral-action.value");
            var testOrderedChecked = jq("#tb-test-ordered input:checkbox:checked");

            //TB
            if(clinicalDiagnosis ==703) {
                jq("#tb-result-status input[value=1660]").prop("checked", false);
                jq("#tb-result-status input[value=142177]").prop("checked", false);
                jq("#tb-result-status input[value=1662]").prop("checked", true);
                jq('#ipt-client-workup').hide();

            }
            //No signs
            if((clinicalDiagnosis !=703) &amp;&amp; (testOrderedChecked.length &lt; 0 || referral !=1065 || sputumSmear !=703 || xray !=152526 || geneXpert !=162203 || geneXpert !=162204 || geneXpert !=164104)){
                jq("#tb-result-status input[value=1660]").prop("checked", true);
                jq("#tb-result-status input[value=142177]").prop("checked", false);
                jq("#tb-result-status input[value=1662]").prop("checked", false);
                jq('#ipt-client-workup').hide();
            }
            //No signs with normal/negative Tests results
            if((clinicalDiagnosis !=703) &amp;&amp; ((testOrderedChecked.length &gt; 0 &amp;&amp; sputumSmear ==664) || (testOrderedChecked.length &gt; 0 &amp;&amp; xray ==1115) || (testOrderedChecked.length &gt; 0 &amp;&amp; (geneXpert !=162203 || geneXpert !=162204 || geneXpert !=164104)))){
                jq("#tb-result-status input[value=1660]").prop("checked", true);
                jq("#tb-result-status input[value=142177]").prop("checked", false);
                jq("#tb-result-status input[value=1662]").prop("checked", false);
                jq('#ipt-client-workup').hide();
            }
            //Presumed TB  with abnormal/positive Tests results
            if((clinicalDiagnosis !=703) &amp;&amp; ((testOrderedChecked.length &gt; 0 &amp;&amp; sputumSmear ==703) || (testOrderedChecked.length &gt; 0 &amp;&amp; xray ==152526) || (testOrderedChecked.length &gt; 0 &amp;&amp; (geneXpert ==162203 || geneXpert ==162204 || geneXpert ==164104)))){
                jq("#tb-result-status input[value=1660]").prop("checked", false);
                jq("#tb-result-status input[value=142177]").prop("checked", true);
                jq("#tb-result-status input[value=1662]").prop("checked", false);
                jq('#ipt-client-workup').hide();
            }
            //Presumed TB
            if((clinicalDiagnosis !=703) &amp;&amp; (testOrderedChecked.length &lt; 0 || referral ==1065 || sputumSmear ==703 || xray ==152526 || geneXpert ==162203 || geneXpert ==162204 || geneXpert ==164104)){
                jq("#tb-result-status input[value=1660]").prop("checked", false);
                jq("#tb-result-status input[value=142177]").prop("checked", true);
                jq("#tb-result-status input[value=1662]").prop("checked", false);
                jq('#ipt-client-workup').hide();
            }
        }
        //Resulting TB status for Action Positive GeneXpert
        var geneXpertAction  = function () {

            var geneXpert = getField("genexpert-action.value").val();
            var sputumSmear = getValue("sputum-smear-action.value");
            var clinicalDiagnosis = getValue("clinical-diagnosis-action.value");
            var xray = getValue("chest-xray-action.value");
            var referral = getValue("referral-action.value");
            var testOrderedChecked = jq("#tb-test-ordered input:checkbox:checked");

            //TB
            if(clinicalDiagnosis ==703) {
                jq("#tb-result-status input[value=1660]").prop("checked", false);
                jq("#tb-result-status input[value=142177]").prop("checked", false);
                jq("#tb-result-status input[value=1662]").prop("checked", true);
                jq('#ipt-client-workup').hide();

            }
            //No signs
            if((clinicalDiagnosis !=703) &amp;&amp; (testOrderedChecked.length &lt; 0 || referral !=1065 || sputumSmear !=703 || xray !=152526 || geneXpert !=162203 || geneXpert !=162204 || geneXpert !=164104)){
                jq("#tb-result-status input[value=1660]").prop("checked", true);
                jq("#tb-result-status input[value=142177]").prop("checked", false);
                jq("#tb-result-status input[value=1662]").prop("checked", false);
                jq('#ipt-client-workup').hide();
            }
            //No signs with normal/negative Tests results
            if((clinicalDiagnosis !=703) &amp;&amp; ((testOrderedChecked.length &gt; 0 &amp;&amp; sputumSmear ==664) || (testOrderedChecked.length &gt; 0 &amp;&amp; xray ==1115) || (testOrderedChecked.length &gt; 0 &amp;&amp; (geneXpert !=162203 || geneXpert !=162204 || geneXpert !=164104)))){
                jq("#tb-result-status input[value=1660]").prop("checked", true);
                jq("#tb-result-status input[value=142177]").prop("checked", false);
                jq("#tb-result-status input[value=1662]").prop("checked", false);
                jq('#ipt-client-workup').hide();
            }
            //Presumed TB  with abnormal/positive Tests results
            if((clinicalDiagnosis !=703) &amp;&amp; ((testOrderedChecked.length &gt; 0 &amp;&amp; sputumSmear ==703) || (testOrderedChecked.length &gt; 0 &amp;&amp; xray ==152526) || (testOrderedChecked.length &gt; 0 &amp;&amp; (geneXpert ==162203 || geneXpert ==162204 || geneXpert ==164104)))){
                jq("#tb-result-status input[value=1660]").prop("checked", false);
                jq("#tb-result-status input[value=142177]").prop("checked", true);
                jq("#tb-result-status input[value=1662]").prop("checked", false);
                jq('#ipt-client-workup').hide();
            }
            //Presumed TB
            if((clinicalDiagnosis !=703) &amp;&amp; (testOrderedChecked.length &lt; 0 || referral ==1065 || sputumSmear ==703 || xray ==152526 || geneXpert ==162203 || geneXpert ==162204 || geneXpert ==164104)){
                jq("#tb-result-status input[value=1660]").prop("checked", false);
                jq("#tb-result-status input[value=142177]").prop("checked", true);
                jq("#tb-result-status input[value=1662]").prop("checked", false);
                jq('#ipt-client-workup').hide();
            }

        }
        //Resulting TB status for Abnormal chest x ray
        var chestXrayAction = function () {
            var xray = getValue("chest-xray-action.value");
            var sputumSmear = getValue("sputum-smear-action.value");
            var geneXpert = getField("genexpert-action.value").val();
            var referral = getValue("referral-action.value");
            var clinicalDiagnosis = getValue("clinical-diagnosis-action.value");
            var testOrderedChecked = jq("#tb-test-ordered input:checkbox:checked");

            //TB
            if(clinicalDiagnosis ==703) {
                jq("#tb-result-status input[value=1660]").prop("checked", false);
                jq("#tb-result-status input[value=142177]").prop("checked", false);
                jq("#tb-result-status input[value=1662]").prop("checked", true);
                jq('#ipt-client-workup').hide();

            }
            //No signs
            if((clinicalDiagnosis !=703) &amp;&amp; (testOrderedChecked.length &lt; 0 || referral !=1065 || sputumSmear !=703 || xray !=152526 || geneXpert !=162203 || geneXpert !=162204 || geneXpert !=164104)){
                jq("#tb-result-status input[value=1660]").prop("checked", true);
                jq("#tb-result-status input[value=142177]").prop("checked", false);
                jq("#tb-result-status input[value=1662]").prop("checked", false);
                jq('#ipt-client-workup').hide();
            }
            //No signs with normal/negative Tests results
            if((clinicalDiagnosis !=703) &amp;&amp; ((testOrderedChecked.length &gt; 0 &amp;&amp; sputumSmear ==664) || (testOrderedChecked.length &gt; 0 &amp;&amp; xray ==1115) || (testOrderedChecked.length &gt; 0 &amp;&amp; (geneXpert !=162203 || geneXpert !=162204 || geneXpert !=164104)))){
                jq("#tb-result-status input[value=1660]").prop("checked", true);
                jq("#tb-result-status input[value=142177]").prop("checked", false);
                jq("#tb-result-status input[value=1662]").prop("checked", false);
                jq('#ipt-client-workup').hide();
            }
            //Presumed TB  with abnormal/positive Tests results
            if((clinicalDiagnosis !=703) &amp;&amp; ((testOrderedChecked.length &gt; 0 &amp;&amp; sputumSmear ==703) || (testOrderedChecked.length &gt; 0 &amp;&amp; xray ==152526) || (testOrderedChecked.length &gt; 0 &amp;&amp; (geneXpert ==162203 || geneXpert ==162204 || geneXpert ==164104)))){
                jq("#tb-result-status input[value=1660]").prop("checked", false);
                jq("#tb-result-status input[value=142177]").prop("checked", true);
                jq("#tb-result-status input[value=1662]").prop("checked", false);
                jq('#ipt-client-workup').hide();
            }
            //Presumed TB
            if((clinicalDiagnosis !=703) &amp;&amp; (testOrderedChecked.length &lt; 0 || referral ==1065 || sputumSmear ==703 || xray ==152526 || geneXpert ==162203 || geneXpert ==162204 || geneXpert ==164104)){
                jq("#tb-result-status input[value=1660]").prop("checked", false);
                jq("#tb-result-status input[value=142177]").prop("checked", true);
                jq("#tb-result-status input[value=1662]").prop("checked", false);
                jq('#ipt-client-workup').hide();
            }
        }
        //Resulting TB status for Action Referral
        var referralAction  = function () {
            var referral = getValue("referral-action.value");
            var sputumSmear = getValue("sputum-smear-action.value");
            var geneXpert = getField("genexpert-action.value").val();
            var clinicalDiagnosis = getValue("clinical-diagnosis-action.value");
            var xray = getValue("chest-xray-action.value");
            var testOrderedChecked = jq("#tb-test-ordered input:checkbox:checked");

            //TB
            if(clinicalDiagnosis ==703) {
                jq("#tb-result-status input[value=1660]").prop("checked", false);
                jq("#tb-result-status input[value=142177]").prop("checked", false);
                jq("#tb-result-status input[value=1662]").prop("checked", true);
                jq('#ipt-client-workup').hide();
            }
            //No signs
            if((clinicalDiagnosis !=703) &amp;&amp; (testOrderedChecked.length &lt; 0 || referral !=1065 || sputumSmear !=703 || xray !=152526 || geneXpert !=162203 || geneXpert !=162204 || geneXpert !=164104)){
                jq("#tb-result-status input[value=1660]").prop("checked", true);
                jq("#tb-result-status input[value=142177]").prop("checked", false);
                jq("#tb-result-status input[value=1662]").prop("checked", false);
                jq('#ipt-client-workup').hide();
            }
            //No signs with normal/negative Tests results
            if((clinicalDiagnosis !=703) &amp;&amp; ((testOrderedChecked.length &gt; 0 &amp;&amp; sputumSmear ==664) || (testOrderedChecked.length &gt; 0 &amp;&amp; xray ==1115) || (testOrderedChecked.length &gt; 0 &amp;&amp; (geneXpert !=162203 || geneXpert !=162204 || geneXpert !=164104)))){
                jq("#tb-result-status input[value=1660]").prop("checked", true);
                jq("#tb-result-status input[value=142177]").prop("checked", false);
                jq("#tb-result-status input[value=1662]").prop("checked", false);
                jq('#ipt-client-workup').hide();
            }
            //Presumed TB  with abnormal/positive Tests results
            if((clinicalDiagnosis !=703) &amp;&amp; ((testOrderedChecked.length &gt; 0 &amp;&amp; sputumSmear ==703) || (testOrderedChecked.length &gt; 0 &amp;&amp; xray ==152526) || (testOrderedChecked.length &gt; 0 &amp;&amp; (geneXpert ==162203 || geneXpert ==162204 || geneXpert ==164104)))){
                jq("#tb-result-status input[value=1660]").prop("checked", false);
                jq("#tb-result-status input[value=142177]").prop("checked", true);
                jq("#tb-result-status input[value=1662]").prop("checked", false);
                jq('#ipt-client-workup').hide();
            }
            //Presumed TB
            if((clinicalDiagnosis !=703) &amp;&amp; (testOrderedChecked.length &lt; 0 || referral ==1065 || sputumSmear ==703 || xray ==152526 || geneXpert ==162203 || geneXpert ==162204 || geneXpert ==164104)){
                jq("#tb-result-status input[value=1660]").prop("checked", false);
                jq("#tb-result-status input[value=142177]").prop("checked", true);
                jq("#tb-result-status input[value=1662]").prop("checked", false);
                jq('#ipt-client-workup').hide();
            }

        }

        //Resulting TB status for Action clinical diagnosis
        var clinicalDiagnosisAction  = function () {
            var clinicalDiagnosis = getValue("clinical-diagnosis-action.value");
            var sputumSmear = getValue("sputum-smear-action.value");
            var xray = getValue("chest-xray-action.value");
            var referral = getValue("referral-action.value");
            var geneXpert = getField("genexpert-action.value").val();
            var testOrderedChecked = jq("#tb-test-ordered input:checkbox:checked");

            if(clinicalDiagnosis ==703){
                jq("#tb-result-status input[value=1662]").prop("disabled", false);
                jq("#tb-result-status input[value=1662]").prop("checked", true);
                jq("#tb-result-status.input[value=142177]").prop("disabled", true);
                jq("#tb-result-status.input[value=1660]").prop("disabled", true);
                jq("#tb-result-status.input[value=160737]").prop("disabled", true);
                jq("#tbl-start-antiTb").show();
                jq('#ipt-client-workup').hide();
                jq('#ipt-initiation').hide();
                jq('#ipt-result-status').hide();
            }
            if(clinicalDiagnosis ==664 ){
               jq("#tb-result-status input[value=1662]").prop("checked", false);
               jq("#tbl-start-antiTb").hide();
            }
            if(testOrderedChecked.length ==0 &amp;&amp; clinicalDiagnosis !=703 &amp;&amp; referral !=1065 &amp;&amp; sputumSmear !=703 &amp;&amp; xray !=152526 &amp;&amp;(geneXpert !=162203 || geneXpert !=162204 || geneXpert !=164104)) {
                jq("#tb-result-status input[value=1660]").prop("checked", true);
                jq("#tb-result-status input[value=142177]").prop("checked", false);
                jq("#tb-result-status input[value=1662]").prop("checked", false);
                jq('#ipt-client-workup').hide();
               // getField('tbrxdate.value').val("");
            }
        }
        //Resulting TB status for Action start anti tb
        var startAntiTbAction  = function () {
            var startAntiTb = getValue("start-anti-tb-action.value");
            var sputumSmear = getValue("sputum-smear-action.value");
            var xray = getValue("chest-xray-action.value");
            var testOrderedChecked = jq("#tb-test-ordered input:checkbox:checked");

            if(startAntiTb ==1065){
                jq("#tb-result-status input[value=1662]").prop("disabled", false);
                jq("#tb-result-status input[value=1662]").prop("checked", true);
                jq("#tb-result-status.input[value=142177]").prop("disabled", true);
                jq("#tb-result-status.input[value=1660]").prop("disabled", true);
                jq("#tb-result-status.input[value=160737]").prop("disabled", true);
                jq('#ipt-client-workup').hide();
                jq('#ipt-initiation').hide();
                jq('#ipt-result-status').hide();
                //set TB RX date to todays date
                var encounterDate = getValue('encounter-date.value');
                //Validate for moment
                var momentEncounterDate =moment(moment(encounterDate,'YYYY-MM-DD').toDate()).format("DD-MMM-YYYY");
                getField('tbrxdate.value').val(momentEncounterDate);
            }
            if(startAntiTb ==1066 ){
               // jq("#tb-result-status input[value=1662]").prop("disabled", true);
                //jq('#tbrxdate').val(" ");
                getField('tbrxdate.value').val("");
            }

        }
//IPT EVENT SELECTED
        var iptEventSelected  = function () {

            var iptEvent = getValue('ipt-event-type.value');
            if(!isNaN(iptEvent) &amp;&amp; (iptEvent == 159836)){
                jq("#reason-for-discontinuation").show();
            }
          else{
              jq("#reason-for-discontinuation").hide();
              }
        }
//Start on jq onready
        jq(function() {

         getField('weight.value').change(onWeightOrHeightChange);
         getField('height.value').change(onWeightOrHeightChange);
         onWeightOrHeightChange();
         var age = parseInt('<lookup expression="patient.age"/>');
         var pgender = "<lookup expression="patient.gender" />";
            //Gravida
            if (pgender == 'F' &amp;&amp; age &gt; 10 ) {
                getField('parity-term.value').change(onParityChange);
                getField('parity-abortion.value').change(onParityChange);
            }
         everOnIPTSelected = null;
         patientCurrentlyOnIPT = null;
         //Defaults on ready
         jq("#tbl-partner-notification").hide();
         jq("#tbl-adverse-reactions").hide();
         jq('input[type=radio].adverse-reactions').prop("checked", false);
         jq("#tbl-complaints-today").hide();
         jq("#tbl-systems-review").hide();
         jq('input[type=radio].complaints-today').prop("checked", false);
         jq("#tbl-known-allergies").hide();
         jq('input[type=radio].known-allergies').prop("checked", false);
         jq("#tbl-chronic-illness").hide();
         jq('input[type=radio].chronic-illness').prop("checked", false);
         jq("#key-population").hide();
         jq('input[type=radio].key-population').prop("checked", false);
            //jq("#nutritional-status input[type=radio]").prop("disabled", true);
         jq("#nutritional-status input[type=radio]").prop("checked", false);
         jq("#general-exam-findings :input[type=checkbox]").prop("checked",false);
         jq('#person-present input').click(onPersonPresentChange);
         jq('input[type=radio].on-ipt').prop("disabled", true);
         jq('input[type=radio].on-ipt').prop("checked", false);
         jq('input[type=radio].on-anti-tb-drugs').prop("checked", false);
         jq("#tbl-start-antiTb").hide();
         jq("#ipt-uptake").hide();
         jq("#tb-screening-result").hide();
         //jq('#pregnancyOption :input').prop('disabled', true);
         jq('#pregnancyOptionValues').hide();
         jq('#fp-details').hide();
         jq("#wants-pregnancy").hide();
         jq(".nav-links").hide();
         jq(".show-nav-links").text("Click to Show/Hide Form Sections");
         jq("#tb-screening-tab").hide();
         jq("#ever-on-ipt").hide();
         //IPT OUTCOME
         jq("#tbl-ipt-outcome").hide();
         jq("#reason-for-discontinuation").hide();
         getField('ipt-event-type.value').change(iptEventSelected);
         jq("#bt-ipt-outcome").click(onRecordIPTOutcome);
         var actionTakenTab = jq('#action-taken');
         var iptClientWorkupTab = jq('#ipt-client-workup');
         var iptFollowup = jq('#ipt-followup');
         var iptInitiationTab = jq('#ipt-initiation');
         actionTakenTab.hide();
         iptClientWorkupTab.hide();
         iptFollowup.hide();
         iptInitiationTab.hide();
         ageGroup();
         displayRecentBmi();

         //Event Handlers
         jq("#lmp-date :input[type=text]").change(onLmpChange);
         jq('input[type=radio].on-anti-tb-drugs').change(onAntiTbDrugs);
         jq('input[type=radio].on-ipt').change(onIPT);
         jq("input[type=radio].ever-on-ipt").change(everOnIPT);
         //sti notification
         //getField('screened-sti.value').change(screenedStiSelected);
         jq("#screened-sti :input[type=radio]").change(screenedStiSelected);
         //tb action
         jq("#start-anti-tb-action").change(startAntiTbAction);
         jq("#clinical-diagnosis-action").change(clinicalDiagnosisAction);
         jq("#sputum-smear-action").change(sputumSmearAction);
         jq("#genexpert-action select").change(geneXpertAction);
         jq("#chest-xray-action").change(chestXrayAction);
         jq("#referral-action").change(referralAction);
         jq("#tb-test-ordered").change(testOrdered);
         jq('#general-exam-findings :input[type=checkbox]').change(generalExamSelected);
         jq('input[type=radio].complaints-today').change(complaintSelected);
         getField('complaint-duration.value').change(complaintDurationInput);
        // getField('complaint-date.value').change(complaintDateInput);
         jq('input[type=radio].adverse-reactions').change(adverseReactionSelected);
         jq('input[type=radio].known-allergies').change(knownAllergiesSelected);
         jq('input[type=radio].systems-review').change(systemsReviewSelected);
         jq('input[type=radio].chronic-illness').change(chronicIllnessesSelected);
         jq('input[type=radio].population-type').change(populationTypeSelected);

            var strtext = "";
            var familyPlanningOption = getValue('fplanning.value');
            var pregnancyOption = getValue('pregnancyOption.value');

            if (familyPlanningOption == "") {
                jq('#onFp :input').prop('disabled', true);
                jq('#notOnFp :input').prop('disabled', true);
            }
            if (familyPlanningOption == "965") {
                jq('#onFp :input').prop('disabled', false);
                jq('#notOnFp :input').prop('disabled', true);
            }
            if (familyPlanningOption == "160652") {
                jq('#onFp :input').prop('disabled', true);
                jq('#notOnFp :input').prop('disabled', false);
            }
            if (familyPlanningOption == "1360") {
                jq('#onFp :input').prop('disabled', false);
                jq('#notOnFp :input').prop('disabled', true);
            }
            jq('#pregnancyOption input:radio').change(function () {
                if ((getValue('pregnancyOption.value')) == 1066) {
                    //jq('#pregnancyOptionValues :input').prop('disabled', true);
                    jq('#pregnancyOptionValues').hide();
                    jq('#fp-details').hide();
                    jq('#fpOptionValues :input').prop('disabled', false);
                    jq('#fpOptionValues :input').prop('checked', false);
                    jq("#wants-pregnancy").show();
                }
                else if((getValue('pregnancyOption.value')) == 1065){
                    jq('#pregnancyOptionValues :input').prop('disabled', false);
                    jq('#pregnancyOptionValues').show();
                    jq('#fp-details').hide();
                    jq("#wants-pregnancy").hide();
                  //Automate EDC Computation
                    var lmpDate = getValue('lmp-date.value');
                    var formattedlmp=moment(moment(lmpDate, 'YYYY-MM-DD').toDate()).format('DD-MMM-YYYY');
                    var expectedDeliveryDate = moment(formattedlmp, "DD-MMM-YYYY").add(280, 'days').format('DD-MMM-YYYY');
                    //Find recent EDD if it exists
                    //Using LMP
                    var recentEDD = "<lookup expression="fn.latestObs(5596).getValueDatetime()"/>";
                    var recentLMP = "<lookup expression="fn.latestObs(1427).getValueDatetime()"/>";
                   //Using recent LMP
                    var formattedRecentlmp=moment(moment(recentLMP, 'DD-MMM-YYYY').toDate()).format('DD-MMM-YYYY');
                    var expectedDeliveryDateByRecentLMP = moment(formattedRecentlmp, "DD-MMM-YYYY").add(280, 'days').format('DD-MMM-YYYY');
                    //Calculation
                    if(recentEDD !=""){
                        getField('patient-edd.value').val(recentEDD);
                         }else if(recentLMP !="") {
                         getField('patient-edd.value').val(expectedDeliveryDateByRecentLMP);
                          }else if (lmpDate!=""){
                             getField('patient-edd.value').val(expectedDeliveryDate);
                              }else{
                                   getField('patient-edd.value').val("");
                    }
                }

            });

            jq("#fplanning select ").change(function () {

                jq("#fplanning select option:selected").each(function () {
                    strtext += jq(this).val();
                });

                if (strtext == "") {
                    jq('#notOnFp :input').prop('checked', false);
                    jq('#onFp :input').prop('checked', false);
                    jq('#onFp :input').prop('disabled', true);
                    jq('#notOnFp :input').prop('disabled', true);
                }
                if (strtext == "965") {       //on family planning
                    jq('#notOnFp :input').prop('checked', false);
                    jq('#onFp :input').prop('disabled', false);
                    jq('#notOnFp :input').prop('disabled', true);

                }
                if (strtext == "160652") {
                    jq('#onFp :input').prop('checked', false);
                    jq('#onFp :input').prop('disabled', true);
                    jq('#notOnFp :input').prop('disabled', false);
                }
                if (strtext == "1360") {
                    jq('#notOnFp :input').prop('checked', false);
                    jq('#onFp :input').prop('disabled', false);
                    jq('#notOnFp :input').prop('disabled', true);
                }

                strtext = "";
            });

            jq("#wants-pregnancy").change(function(){
                getField('fplanning.value').prop("selectedIndex", 0);
                jq('#fp-details').show();
                jq('#fpOptionValues :input[type=checkbox]').prop('disabled', true);
                jq('#fpOptionValues :input').prop('checked', false);
            });

            var pbirthdate = new Date("<lookup expression="patient.birthdate" />").getTime();
            var pgender = "<lookup expression="patient.gender" />";

            if (pgender == 'F') {
                beforeSubmit.push(function () {
                    var lmpdate = new Date(getValue('lmp-date.value')).getTime();
                    if (lmpdate &lt; pbirthdate) {
                        getField('lmp-date.error').html('Should not be earlier than birth date').show();
                        return false;
                    }
                    return true;
                });
            }

            /*TB Screening form validation*/
            var valbirthdate = "<lookup  expression="patient.birthdate" />"
            var valChangedToDateFormat = new Date(valbirthdate).getTime();


            beforeSubmit.push(function() {

                var tca_date = getValue('returnVisitDate.value');
                var encounterDate = getValue('encounter-date.value');
                var valonform = getValue('tbrxdate.value');
                var valChangedToDateFormatOnForm=new Date(valonform).getTime();
                var fpMethodsChecked = jq("#onFp input:checkbox:checked");
                var notOnfpMethodsChecked = jq("#onFp input:checkbox:checked");
                var onfpMethodChecked = getField("fplanning.value").val();

                //Must have a Return Visit Date which should be greater than encounter date
                if (tca_date =="") {
                    getField('returnVisitDate.error').html('Return visit date should not be empty').show();
                    return false;
                }
                if (tca_date &lt; encounterDate ){
                        getField('returnVisitDate.error').html('Return visit date should not be earlier than encounter date').show();
                        return false;
                }

                //tb rx date should be later than date of birth
                if (valChangedToDateFormatOnForm &lt; valChangedToDateFormat) {
                    getField('tbrxdate.error').html('TB Rx date, should not be earlier than date of birth').show();
                    return false;
                }
                //tb rx date cannot be same as birth date
                if (valChangedToDateFormatOnForm  == valChangedToDateFormat) {
                    getField('tbrxdate.error').html('TB Rx date, should not be same as  date of birth').show();
                    return false;
                }
                //Validate fp options chooses atleast one option if on fp
                if(onfpMethodChecked ==965 &amp;&amp; fpMethodsChecked.length == 0 ){
                    getField('fp-error.error').html('Please add atleast one family planning method.').show();
                    jq('#fp-details').show();
                    return false;
                }
                //Validate fp options chooses atleast one option if wants family planning
                if(onfpMethodChecked ==1360 &amp;&amp; fpMethodsChecked.length == 0 ){
                    getField('fp-error.error').html('Please add atleast one family planning method.').show();
                    jq('#fp-details').show();
                    return false;
                }
                //Validate not-on-fp options chooses atleast one option if not on fp
                if(onfpMethodChecked ==160652 &amp;&amp; fpMethodsChecked.length == 0 ){
                    getField('notOnfp-error.error').html('Please add atleast one reason.').show();
                    jq('#fp-details').show();
                    return false;
                }
                return true;

            });

            var screeningRadios = jq('#screening-questions').find('input[type=radio]');
            var iptClientWorkupRadios = jq('#ipt-client-workup').find('input[type=radio]');
            var pregnancyStatus = getField('#pregnancyOption');
            var pregnantStatusRadios = jq('#fp-details').find('input[type=checkbox]');

            const YES_CONCEPT_ID = 1065;
            const NO_CONCEPT_ID = 1066;


            //This function will perform the folllowing:
            //Only show 'IPT Client Workup' tab if all screening questions evaluate to NO
            //Only show 'Action Taken' tab if any of the screening questions evaluate to YES
            var showHideTabs = function() {
                var actionTakenTab = jq('#action-taken');
                var iptClientWorkupTab = jq('#ipt-client-workup');
                var iptFollowup = jq('#ipt-followup');
                var tbScreeningQuestionsTab = jq("#tb-screening-tab");
                var everOnIPTRadio = everOnIPTSelected;
                var showActionTakenTab = false;
                var showIPTClientWorkupTab = false;
                var showIPTFollowupTab = false;

                var screeningYesResponses = [];
                var screeningNoResponses = [];
                //defaults

                //Fetch responses for the screening questions
                jq.each(screeningRadios, function(){

                    //Push any responses to the respective screeningYesResponses and screeningNoResponses array
                    if (this.value == YES_CONCEPT_ID &amp;&amp; this.checked == true) {
                        screeningYesResponses.push(this);
                    }

                    if (this.value == NO_CONCEPT_ID &amp;&amp; this.checked == true) {
                        screeningNoResponses.push(this);
                    }

                });
                //If no responses have been recorded then show the ActionTaken and IPTClientWorkup tabs
                if (screeningYesResponses.length == 0 &amp;&amp; screeningNoResponses.length == 0 ) {
                  //Do nothing

                } else {

                    if (everOnIPTRadio == NO_CONCEPT_ID &amp;&amp; screeningYesResponses.length &gt; 0) {
                        actionTakenTab.show();
                        iptClientWorkupTab.hide();
                        iptFollowup.hide();
                        iptInitiationTab.hide();

                        //clear radios for hidden sections
                        clearRadios(iptFollowup);

                    }
                   if (everOnIPTRadio == NO_CONCEPT_ID &amp;&amp; screeningYesResponses.length == 0) {
                        actionTakenTab.hide();
                        iptClientWorkupTab.show();
                        iptFollowup.hide();

                        //clear radios for hidden sections
                        clearRadios(iptFollowup);
                    }
                   if (screeningNoResponses.length == screeningNoResponses.length / 2) { // check if all screening No responses are checked: total radios / 2
                        actionTakenTab.hide();
                        iptClientWorkupTab.show();
                        iptFollowup.hide();

                        //clear radios for hidden sections
                        clearRadios(iptFollowup);
                    }
                   if(everOnIPTRadio == YES_CONCEPT_ID &amp;&amp; screeningYesResponses.length &gt; 0) {

                        actionTakenTab.show();
                        iptClientWorkupTab.hide();
                        iptFollowup.hide();
                        iptInitiationTab.hide();

                        //clear radios for hidden sections

                        clearRadios(iptClientWorkupTab);
                        clearRadios(iptFollowup);
                    }
                    if(screeningYesResponses.length == 0) {
                        actionTakenTab.hide();
                    }
                    if(patientCurrentlyOnIPT == YES_CONCEPT_ID &amp;&amp; screeningYesResponses.length &gt; 0) {
                        actionTakenTab.show();
                        iptFollowup.show();
                        iptClientWorkupTab.hide();
                    }
                    if(screeningYesResponses.length &gt; 0) {
                        actionTakenTab.show();
                        iptClientWorkupTab.hide();
                    }
                }
            };
            var showHideIPTInitiationTab = function() {

                var iptInitiationTab = jq('#ipt-initiation');
                var showIPTInitiationTab = false;

                var iptClientWorkupYesResponses = [];
                var iptClientWorkupNoResponses = [];

                //Fetch responses for the IPT client workup questions
                jq.each(iptClientWorkupRadios, function() {

                    //Push any responses to the respective iptClientWorkupYesResponses and iptClientWorkupNoResponses array
                    if (this.value == YES_CONCEPT_ID &amp;&amp; this.checked == true) {
                        iptClientWorkupYesResponses.push(this);
                    }

                    if (this.value == NO_CONCEPT_ID &amp;&amp; this.checked == true) {
                        iptClientWorkupNoResponses.push(this);
                    }
                });

                if (iptClientWorkupYesResponses.length == 0 &amp;&amp; iptClientWorkupNoResponses.length == 0) {
                } else {

                    if (iptClientWorkupNoResponses.length == iptClientWorkupRadios.length / 2) { // check if all No responses are checked: total radios / 2
                        showIPTInitiationTab = true;
                    }
                }
                if (showIPTInitiationTab) {
                    iptInitiationTab.show();
                    jq('#ipt-result-status').show();

                } else {
                    iptInitiationTab.hide();
                }
            };
            clearRadios = function(parentObj) {

                parentObj.find('input[type=radio]').each(function() {

                    this.checked = false;
                });
            }

            clearHiddenSections = function(parentObj) {

                parentObj.find('input[type=radio]').each(function() {

                    this.checked = false;

                });

                parentObj.find('input[type=checkbox]').each(function() {

                    this.checked = false;

                });
                parentObj.find('input[type=text]').each(function() {

                    this.val("");

                });
                parentObj.find('select').each(function() {

                    this.selectedIndex =0;

                });
            }

            screeningRadios.change(function() {

                showHideTabs();

            });

            iptClientWorkupRadios.change(function() {

                showHideIPTInitiationTab();

            });


            showHideIPTInitiationTab();

            jq(".show-nav-links").click(function () {
                jq(this).closest('tr').find("div.nav-links").toggle();

            });


        });
    </script>

    <div class="ke-form-header">
        <table width="100%">
            <tr>
                <td>Date:
                    <encounterDate id="encounter-date" showTime="true"/>
                </td>
                <td>Location:
                    <encounterLocation default="GlobalProperty:kenyaemr.defaultLocation" type="autocomplete"/>
                </td>
            </tr>
        </table>
    </div>

    <div class="ke-form-content">
        <!-- These initial sections are duplicated from triage.xml, so try to keep them in sync -->
       <a id="visit-summary-section"></a>
        <table class="link" width="100%">
            <tr>
                <td width="80%">
                        <div class="nav-links">
                        <a href="#complaints-section">Complaints</a> | <a href="#tb-screening-section">TB Screening</a> | <a href="#allergies-chronic-illnesses-section">Allergies &amp; other Illnesses</a> | <a href="#reproductive-section">Reproductive History</a> | <a href="#physical-exam-section">Physical Examination</a> | <a href="#treatment-plan-section">Treatment Plan</a>
                    </div>
                </td>
                <td width="20%"> <div><a class="show-nav-links"></a></div></td>
            </tr>
        </table>
        <fieldset>
            <legend>Visit Type</legend>
            <!--pw greencard additions visit type and appointment type -->
            <table cellspacing="5">
                <tr>
                    <th>Scheduled/Unscheduled</th>
                    <th align="left">Visit by</th>
                </tr>
                <tr>

                    <td>
                        <obs id="visit-scheduled" conceptId="1246AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" required="true" style="yes_no"/>

                    </td>
                    <td>
                        <obs
                                id="person-present"
                                conceptId="161643AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                answerConceptIds="978AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,161642AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,5622AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                answerLabels="Self (SF),Treatment supporter (TS),Other (give name)"
                                style="radio"
                                answerSeparator="&lt;br /&gt;"
                        />
                        <obs id="person-present-name" conceptId="160638AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/>
                    </td>
                </tr>
            </table>

        </fieldset>

        <!--Triage-->
        <fieldset>
            <legend>Vital Signs</legend>

            <table cellspacing="5" style=" float: left; ">
                <tr>
                    <th>Vital signs</th>
                    <th align="left">Current</th>
                    <th align="left">Recent</th>
                </tr>
                <tr class="patient-details">
                    <td>Temp</td>
                    <td>
                        <obs conceptId="5088AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/> &#176;C
                    </td>
                    <td>
                        <span class="value"><recentObs conceptId="5088AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/></span>
                    </td>
                </tr>
                <tr class="patient-details">
                    <td>Pulse Rate</td>
                    <td>
                        <obs conceptId="5087AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/>
                    </td>
                    <td><span class="value"><recentObs conceptId="5087AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/></span></td>
                </tr>
                <tr class="patient-details">
                    <td>BP</td>
                    <td>
                        <obs conceptId="5085AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/>
                        /
                        <obs conceptId="5086AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/>
                        mmHg
                    </td>
                    <td><span class="value"><recentObs conceptId="5085AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/> / <recentObs
                            conceptId="5086AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/></span></td>
                </tr>
                <tr class="patient-details">
                    <td>Respiratory Rate</td>
                    <td>
                        <obs conceptId="5242AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/>
                    </td>
                    <td><span class="value"><recentObs conceptId="5242AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/></span></td>
                </tr>
                <tr class="patient-details">
                    <td>Oxygen Saturation</td>
                    <td>
                        <obs conceptId="5092AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/>
                    </td>
                    <td><span class="value"><recentObs conceptId="5092AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/></span></td>
                </tr>
            </table>
            <table cellspacing="5" style="display: inline-block; ">

                <tr>
                    <th>Other Recordings</th>
                    <th align="left">Current</th>
                    <th align="left">Recent</th>
                    <th align="left">Nutritional Status</th>
                </tr>
                <tr class="patient-details">
                    <td>Weight</td>
                    <td>
                        <obs id="weight" conceptId="5089AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/>
                        kg
                    </td>
                    <td><span class="value"><recentObs conceptId="5089AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/></span></td>
                    <td rowspan="4">
                        <obs    id="nutritional-status"
                                conceptId="163300AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                answerConceptIds="1115AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,163302AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,163303AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,114413AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                answerLabels="Normal,Severe acute malnutrition,Moderate acute malnutrition,Overweight/Obese"
                                style="radio"
                                answerSeparator="&lt;br /&gt;"
                        />
                    </td>

                </tr>
                <tr class="patient-details">
                    <td>Height</td>
                    <td>
                        <obs id="height" conceptId="5090AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/>
                        cm
                    </td>
                    <td><span class="value"><recentObs conceptId="5090AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/></span></td>
                </tr>
                <tr class="patient-details">
                    <td>BMI</td>
                    <td><span id="calculated-bmi" class="value"></span></td>
                    <td><span id="recent-calculated-bmi" class="value"></span></td>
                </tr>
                <tr class="patient-details">
                    <td>MUAC</td>
                    <td>
                        <obs conceptId="1343AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/>
                    </td>
                    <td><span class="value"><recentObs conceptId="1343AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/></span></td>
                </tr>



            </table>
        </fieldset>
        <!-- Population Type  -->
            <fieldset>
                <legend>Population Type</legend>
                <div>
                    Patient population type  <input type="radio" name="population-type" class="population-type" value="1065"/> General Population
                    <input type="radio" name="population-type" class="population-type" value="1066"/> Key Population
                </div>
                <table id="key-population">
                    <tr>

                        <td>


                            <!--<obs conceptId="160581AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="6096AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"-->
                                 <!--answerLabel="Discordant Couple" style="checkbox" /><br/>-->
                            <obs conceptId="160581AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="105AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                 answerLabel="People who inject drugs" style="checkbox" /><br/>

                            <includeIf velocityTest="$patient.gender == 'M'">
                            <obs conceptId="160581AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="160578AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                 answerLabel="Men who have sex with men" style="checkbox" /><br/>
                            </includeIf>


                            <includeIf velocityTest="$patient.gender == 'F'">
                            <obs conceptId="160581AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="160579AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                 answerLabel="Female sex Worker" style="checkbox" id="female-sex-worker" /><br/>
                            </includeIf>
                        </td>
                    </tr>
                </table>
        </fieldset>

        <!-- WHO staging -->
        <fieldset>
            <legend>WHO Staging</legend>
     <table>
             <tr>
                      <td>WHO Staging:</td>
                      <td>
                          <div id="whoAdult">
                              <table>
                                  <tr>
                                      <td><strong>Adult</strong></td><td><obs conceptId="5356AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptIds="1204AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1205AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1206AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1207AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="dropdown" answerLabels="WHO Stage1,WHO Stage2,WHO Stage3,WHO Stage4" /></td>
                                  </tr>
                              </table>
                          </div>
                          <div id="whoChild">
                              <table>
                                  <tr>
                                      <td><strong>Child</strong></td><td><obs conceptId="5356AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptIds="1220AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1221AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1222AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA," style="dropdown" answerLabels="WHO Stage1,WHO Stage2,WHO Stage3,WHO Stage4" /></td>
                                  </tr>
                              </table>
                          </div>
                      </td>
                  </tr>
            </table>
        </fieldset>
        <!--Presenting complaints today-->
        <a id="complaints-section"></a>
        <table class="link" width="100%">
            <tr>
                <td width="80%">
                    <div class="nav-links">
                        <a href="#visit-summary-section">Visit Summary</a> | <a href="#tb-screening-section">TB Screening</a> | <a href="#allergies-chronic-illnesses-section">Allergies &amp; other Illnesses</a> | <a href="#reproductive-section">Reproductive History</a> | <a href="#physical-exam-section">Physical Examination</a> | <a href="#treatment-plan-section">Treatment Plan</a>
                    </div>
                </td>
                <td width="20%"> <div><a class="show-nav-links"></a></div></td>
            </tr>
        </table>
        <fieldset>
            <legend>Complaints and History of complaints</legend>
            <div>
                Patient having complaint(s) today? <input type="radio" name="complaints-today" class="complaints-today" value="1065"/> Yes
                <input type="radio" name="complaints-today" class="complaints-today" value="1066"/> No
            </div>
            <table cellspacing="5" id="tbl-complaints-today">
                <tr>
                    <th style="color: #888">Complaint</th>
                    <th style="color: #888; text-align: center">Duration</th>
                    <th style="color: #888; text-align: center">Onset Date</th>
                </tr>
                <repeat>
                    <template>
                        <obsgroup groupingConceptId="1284AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
                            <tr>
                                <td>
                                    <obs conceptId="6042AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                         answerConceptIds="151AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,141631AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,121543AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,119537AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,148035AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,840AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,131021AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,120749AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,871AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,120345AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,119574AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,113054AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,206AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,143264AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,143129AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,142412AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,122496AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,118789AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,141830AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,
                                                            141585AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,141128AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,131040AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,114399AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162626AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,140238AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,140070AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,123396AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,142247AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,135462AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,139084AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,117698AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,116214AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,112989AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,879AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,116558AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,114395AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,135595AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,135488AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,
                                                             121657AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,144576AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,116334AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,131015AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,111721AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,133028AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,133632AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,5978AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,133469AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,133027AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,132653AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,125225AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,131034AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,5953AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,512AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,127777AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,113224AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,131032AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,126535AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,
                                                               141597AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,158843AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,140941AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,125198AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,112200AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,160208AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,111525AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,122983AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,832AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,5622AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                         answerLabels="Abdominal pain,Abnormal Uterine Bleeding,Anxiety,Depression,Back pain,Bloody Urine,Breast Pain,Chest Pain,Cold and Chills,Confusion,Delirium,Convulsions,Seizure,Cough,Crying Infant,Diarrhea,Difficult in breathing,Difficulty in swallowing,Dizziness,Ear Pain,Epigastric Pain,Eye apin,Facial Pain,Fatigue/weakness,Fever,Flank Pain,Vaginal Discharge,Discharge from Penis,Genital Ulcer,Headache,Hearing Loss,Hypotension,Shock,Itchiness/Pruritus,Joint Pain,Leg Pain,Loss of Appetite,Lymphadenopathy,Memory Loss,Coma,Lethargy,Mouth Pain,Mouth Ulceration,Muscle cramps,Muscle Pain,Nausea,Neck Pain,Night sweats,Numbness,Pain when Swallowing,Pelvic Pain,Poor Vision,Rash,Red Eye,Running/Blocked nose,Scrotal Pain,Shoulder Pain,
                                                       Sleep Disturbance,Sore Throat,Excessive Sweating,Swollen Legs,Tremors,Urinary Symptoms,Vertigo,Vomiting,Weight Loss,Other"
                                         style="dropdown"
                                    />
                                </td>
                                <td><obs conceptId="159368AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"  id ="complaint-duration" /></td>
                                <td>
                                    <obs id="complaint-date" conceptId="159948AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                         allowFutureDates="false"/>
                                </td>
                            </tr>
                        </obsgroup>
                    </template>
                    <render n="1" concept="Drug"/>
                    <render n="2" concept="Drug"/>
                    <render n="3" concept="Drug"/>
                    <render n="4" concept="Drug"/>
                    <render n="5" concept="Drug"/>
                </repeat>
            </table>
            <table>
                <tr>
                    <th  style="color: #888" >Clinical Notes</th>
                    <th  style="color: #888" >Previous visit's notes</th>
                </tr>
                <tr>

                    <td>
                        <obs conceptId="160430AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" rows="3" cols="80"/>
                    </td>
                    <td>
                        <span class="value"><recentObs conceptId="160430AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/></span>
                    </td>


                </tr>
            </table>

        </fieldset>
<!-- Additional History  -->
        <a id="tb-screening-section" ></a>
        <table class="link" width="100%">
            <tr>
                <td width="80%">
                    <div class="nav-links">
                        <a href="#visit-summary-section">Visit Summary</a> | <a href="#complaints-section">Complaints</a> | <a href="#allergies-chronic-illnesses-section">Allergies &amp; other Illnesses</a> | <a href="#reproductive-section">Reproductive History</a> | <a href="#physical-exam-section">Physical Examination</a> | <a href="#treatment-plan-section">Treatment Plan</a>
                    </div>
                </td>
                <td width="20%"> <div><a class="show-nav-links"></a></div></td>
            </tr>
        </table>
        <fieldset>
            <legend>Additional History</legend>
            <!--TB Screening-->
            <fieldset>
                <legend>TB Screening</legend>
                <div>
                   Patient on anti-TB Drugs? &#160;<input type="radio" name="on-anti-tb-drugs" class="on-anti-tb-drugs" value="1065"  /> Yes
                    <input type="radio" class="on-anti-tb-drugs" name="on-anti-tb-drugs" value="1066"/> No
                </div>
                <div>
                    Patient currently on IPT? &#160;&#160;<input type="radio" name="on-ipt" class="on-ipt" value="1065"/> Yes
                    <input type="radio" name="on-ipt" class="on-ipt" value="1066"/> No
                </div>
                <div id="ever-on-ipt" >
                    Patient ever on IPT? &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <input type="radio" name="patient_ever_on_ipt" class="ever-on-ipt" value="1065"/> Yes
                    <input type="radio" class="ever-on-ipt" name="patient_ever_on_ipt" value="1066"/> No

                </div>
                <fieldset id="tb-screening-tab">
                    <legend>Screening Questions</legend>
                    <table id="screening-questions">
                        <tr>
                            <obsgroup groupingConceptId="1727AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
						<span style="display: none">
							<obs conceptId="1728AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="159799AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="checkbox" defaultValue="159799"/>
						</span>
                                <td>Cough of any duration:</td>
                                <td><obs conceptId="1729AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText=" " answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="radio" answerLabels="Yes,No" /></td>
                            </obsgroup>
                        </tr>
                        <includeIf velocityTest="$patient.age &lt; 15">
                        <tr>
                            <obsgroup groupingConceptId="1727AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
						<span style="display: none">
							<obs conceptId="1728AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"  answerConceptId="124068AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="checkbox" defaultValue="124068"/>
						</span>
                                <td>Contact with a TB Case:</td>
                                <td><obs conceptId="1729AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText=" " answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="radio" answerLabels="Yes,No" /></td>
                            </obsgroup>
                        </tr>
                        </includeIf>
                        <tr>
                            <obsgroup groupingConceptId="1727AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
						<span style="display: none">
							<obs conceptId="1728AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="1494AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="checkbox" defaultValue="1494"/>
						</span>
                                <td>Fever:</td>
                                <td><obs conceptId="1729AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText=" " answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="radio" answerLabels="Yes,No" /></td>
                            </obsgroup>
                        </tr>
                        <tr>
                            <obsgroup groupingConceptId="1727AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
						<span style="display: none">
							<obs conceptId="1728AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="832AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="checkbox" defaultValue="832"/>
						</span>
                                <td>Noticeable weight loss or poor weight gain:</td>
                                <td><obs conceptId="1729AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText=" " answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="radio" answerLabels="Yes,No" /></td>
                            </obsgroup>
                        </tr>
                        <includeIf velocityTest="$patient.age &gt; 15">
                        <tr>
                            <obsgroup groupingConceptId="1727AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
						<span style="display: none">
							<obs conceptId="1728AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="133027AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="checkbox" defaultValue="133027"/>
						</span>
                                <td>Night sweats:</td>
                                <td><obs conceptId="1729AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText=" " answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="radio" answerLabels="Yes,No" /></td>
                            </obsgroup>
                        </tr>
                        </includeIf>
                    </table>
                </fieldset>

                <fieldset id="action-taken">
                    <legend>Indicate Action Taken</legend>
                    <table id="tb-test-ordered">
                        <tr>
                            <td>Tests Ordered:</td>
                            <td><obs id="ord-sputum-smear" conceptId="1271AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Sputum Smear" answerConceptId="307AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="checkbox" /><hr/></td>
                            <td><obs id="ord-chest-xray" conceptId="1271AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Chest Xray" answerConceptId="12AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="checkbox" /><hr/></td>
                            <td><obs id="ord-gene-xpert" conceptId="1271AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="GeneXpert" answerConceptId="162202AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="checkbox" />
                                <hr/> </td>

                        </tr>
                    </table>

                    <table>

                        <tr>
                        <td>Sputum Smear:</td>
                        <td><obs id="sputum-smear-action" conceptId="307AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText=" " answerConceptIds="703AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,664AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="radio" /></td>

                        </tr>
                        <tr>
                            <td>Chest X-ray:</td>
                            <td><obs id="chest-xray-action" conceptId="12AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText=" " answerConceptIds="1115AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,152526AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="radio" /></td>
                        </tr>
                        <includeIf velocityTest="$patient.age &lt; 15">
                            <tr>
                                <td>Referral:</td>
                                <td><obs id="referral-action" conceptId="1272AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText=" " answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="radio" /></td>
                            </tr>
                        </includeIf>
                        <tr>
                            <td>GeneXpert:</td>
                            <td><obs id="genexpert-action" conceptId="162202AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                     answerConceptIds="664AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162203AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162204AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,164104AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,163611AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1138AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                     style="dropdown"

                            /></td>

                        </tr>
                        <tr>
                            <td colspan="2"><p> </p></td>
                        </tr>
                        <tr>
                            <td>Clinical diagnosis:</td>
                            <td><obs  id="clinical-diagnosis-action" conceptId="163752AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText=" " answerConceptIds="703AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,664AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="radio" /></td>
                        </tr>

                        <tr>
                            <td>Invitation of contacts:</td>
                            <td><obs conceptId="163414" labelText=" " answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="radio" /></td>
                        </tr>
                        <tr>
                            <td>Evaluated for IPT:</td>
                            <td><obs conceptId="162275AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText=" " answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="radio" /></td>
                        </tr>
                    </table>
                    <table id="tb-screening-result">
                        <tr>
                            <td colspan="2"><p> </p></td>
                        </tr>
                        <tr>

                            <td colspan="3">
                                <obs id="tb-result-status" conceptId="1659AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText="Resulting TB Status:" answerConceptIds="1660AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,142177AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1662AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,160737AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="radio" answerLabels="No TB Signs,Presumed TB,TB Confirmed,TB Screening Not Done" />
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2"> <p></p></td>
                        </tr>
                    </table>
                    <table id="tbl-start-antiTb">
                        <tr>
                        <td colspan="2">Start Anti-TBs:
                        <obs  id="start-anti-tb-action" conceptId="162309AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="radio"
                              answerLabels="Yes,No"/>
                            <hr />
                        </td>

                    </tr>
                  <tr><p></p></tr>

                        <tr id="tbrxfield">
                            <td width="50%" style="text-align: left"><obs  conceptId="1113AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText="TB Rx date: " id="tbrxdate"/> </td>

                            <td><obs conceptId="1111AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText="TB Rx:"
                                     answerConceptSetIds="160021AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="dropdown"
                                /></td>
                        </tr>
                    </table>
                </fieldset>
                <fieldset id="ipt-client-workup">
                    <legend>Isoniazid Preventive Therapy (IPT) Client Workup</legend>
                    <table>
                        <tr>
                            <td colspan="2" class="ke-panel-header">Ask for the following</td>
                        </tr>
                        <tr>
                            <obsgroup groupingConceptId="1727AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
						<span style="display: none">
							<obs conceptId="1728AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="162311AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="checkbox" defaultValue="162311"/>
						</span>
                                <td>1. Yellow Urine</td>
                                <td><obs conceptId="1729AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText=" " answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="radio" answerLabels="Yes,No" /></td>
                            </obsgroup>
                        </tr>
                        <tr>
                            <obsgroup groupingConceptId="1727AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
						<span style="display: none">
							<obs conceptId="1728AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="132652AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="checkbox" defaultValue="132652"/>
						</span>
                                <td>2. Numbness/ burning sensation on the hands or feet</td>
                                <td><obs conceptId="1729AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText=" " answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="radio" answerLabels="Yes,No" /></td>
                            </obsgroup>
                        </tr>
                        <tr>
                            <td colspan="2" class="ke-panel-header">Examine the following</td>
                        </tr>
                        <tr>
                            <obsgroup groupingConceptId="1727AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
						<span style="display: none">
							<obs conceptId="1728AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="5192AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="checkbox" defaultValue="5192"/>
						</span>
                                <td>1. Yellowness of eyes </td>
                                <td><obs conceptId="1729AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText=" " answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="radio" answerLabels="Yes,No" /></td>
                            </obsgroup>
                        </tr>
                        <tr>
                            <obsgroup groupingConceptId="1727AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
						<span style="display: none">
							<obs conceptId="1728AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="124994AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="checkbox" defaultValue="124994"/>
						</span>
                                <td>2.Tenderness in the upper right quadrant of the abdomen </td>
                                <td><obs conceptId="1729AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText=" " answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="radio" answerLabels="Yes,No" /></td>
                            </obsgroup>
                        </tr>
                    </table>
                </fieldset>

                <div id="ipt-initiation" style="width: 100%; float: left; overflow: auto; text-align: left; padding: 5px"><span class="ke-flagtag">Candidate for IPT Initiation</span>
                    <table>
                    <tr>
                        <td colspan="2">
                            <obs id="ipt-result-status" conceptId="1265AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText="Resulting IPT Action:" answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="radio" answerLabels="IPT Started,IPT Not Started" />
                            <hr />
                        </td>
                    </tr>
                </table>
                </div>

            </fieldset>
            <fieldset id="ipt-followup">
                <legend>IPT Followup</legend>

                <table>
                    <tr>
                        <td>IPT Due Date</td>
                        <td><obs conceptId="164073AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" allowFutureDates="true" /></td>
                    </tr>
                    <tr>
                        <td>Date collected IPT</td>
                        <td><obs conceptId="164074" allowFutureDates="true" /></td>
                    </tr>
                    <tr>
                        <td>Weight</td>
                        <td><recentObs conceptId="5089AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/></td>
                    </tr>
                    <tr>
                        <td>Hepatotoxity?  &lt;/br&gt; (Vomiting, persistent irritability, abdominal pain, RUQ pain, yellow urine or eyes)</td>
                        <td><obs conceptId="159098AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"  answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="radio"/></td>
                    </tr>
                    <tr>
                        <td>Peripheral Neuropathy  &lt;/br&gt; Does client have any of the following in the limbs? Numbness, tingling or burning sensation</td>
                        <td><obs conceptId="118983AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="radio"/></td>
                    </tr>
                    <tr>
                        <td>Does the patient have Rash?	</td>
                        <td><obs conceptId="512AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="radio"/></td>
                    </tr>
                    <tr>
                        <td>Adherence Measurement &lt;/br&gt;Good= missed &lt;3 doses/month Fair=missed 4-8 doses/month Poor= missed 9 doses/month</td>
                        <td><obs conceptId="164075AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptIds="159405AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,159406AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,159407AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="radio"/></td>
                    </tr>
                </table>
          <br />
                <div>  <button type="button" name="bt-ipt-outcome" id="bt-ipt-outcome">Record IPT Outcome</button> </div>
                <table id="tbl-ipt-outcome">

                            <tr>
                                <td>Event:</td>
                                <td><obs id="ipt-event-type" conceptId="160433AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptIds="1267AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,5240AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,159836AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,160034AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,159492AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="dropdown" labelText=""  showDate="true"/></td>
                            </tr>
                            <tr id="reason-for-discontinuation">
                                <td>Reason for discontinuation</td>
                                <td><obs conceptId="1266AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptIds="102AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,112141AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,5622AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="dropdown" labelText="" /></td>
                            </tr>
                    <tr>
                        <td>Action Taken</td>
                        <td><obs id="action-taken" conceptId="160632" cols="45" rows="1" /></td>
                    </tr>
                </table>

            </fieldset>

            <fieldset id="ipt-uptake">
                <legend>IPT Uptake History</legend>

                <table>
                    <tr>
                        <th>IPT Due Date</th>
                        <th>Date collected IPT</th>
                        <th>Weight(Kg)</th>
                        <th>Hepatotoxicity</th>
                        <th>Peripheral Neuropathy</th>
                        <th>Rash?</th>
                        <th>Adherence Measurement</th>
                    </tr>
                    <lookup complexExpression="
			#foreach($encounter in $fn.allEncounters('aadeafbe-a3b1-4c57-bc76-8461b778ebd6'))
				&lt;tr&gt;
				#set($iptDueDate='')
				#set($iptCollectionDate='')
				#set($weight='')
				#set($hepatotoxicity='')
				#set($peripheralneuropathy='')
				#set($rash='')
				#set($adherenceMeasurement='')

				#foreach($obs in $encounter.obs)

						#if ( $obs.concept==164073 )
							#set($iptDueDate=($obs.getValueAsString(en)))
						#end
						#if ( $obs.concept==164074 )
							#set($iptCollectionDate=$obs.getValueAsString(en))
						#end
						#if ( $obs.concept==5089 )
							#set($weight=$obs.valueNumeric)
						#end
						#if ( $obs.concept==159098 )
							#set($hepatotoxicity=$obs.valueCoded.name)
						#end
						#if ( $obs.concept==118983 )
							#set($peripheralneuropathy=$obs.valueCoded.name)
						#end
						#if ( $obs.concept==512 )
							#set($rash=$obs.valueCoded.name)
						#end
						#if ( $obs.concept==164075 )
							#set($adherenceMeasurement=$obs.valueCoded.name)
						#end

				#end

				&lt;td&gt;
					$iptDueDate
				&lt;/td&gt;
				&lt;td&gt;
					$iptCollectionDate
				&lt;/td&gt;
				&lt;td&gt;
					$weight
				&lt;/td&gt;
				&lt;td&gt;
					$hepatotoxicity
				&lt;/td&gt;
				&lt;td&gt;
					$peripheralneuropathy
				&lt;/td&gt;
				&lt;td&gt;
					$rash
				&lt;/td&gt;
				&lt;td&gt;
					$adherenceMeasurement
				&lt;/td&gt;
				&lt;/tr&gt;
			#end"/>
                </table>

            </fieldset>

            <!--Adverse Drug Reactions-->
            <a id="allergies-chronic-illnesses-section"></a>
            <table class="link" width="100%">
                <tr>
                    <td width="80%">
                        <div class="nav-links">
                            <a href="#visit-summary-section">Visit Summary</a> | <a href="#complaints-section">Complaints</a> | <a href="#tb-screening-section">TB Screening</a> | <a href="#reproductive-section">Reproductive History</a> | <a href="#physical-exam-section">Physical Examination</a> | <a href="#treatment-plan-section">Treatment Plan</a>
                        </div>
                    </td>
                    <td width="20%"> <div><a class="show-nav-links"></a></div></td>
                </tr>
            </table>

            <!-- Known allergies   -->
            <fieldset>
                <legend>Known Allergies</legend>
                <div>
                    Patient has any known allergie(s)? &#160;&#160;&#160;&#160; <input type="radio" name="known-allergies" class="known-allergies" value="1065"/> Yes
                    <input type="radio" name="known-allergies" class="known-allergies" value="1066"/> No
                </div>

                <table id="tbl-known-allergies">
                    <tr>
                        <td colspan="2">Record any known allergies<br/>
                            <table>
                                <tr>
                                    <th>Causative agent</th>
                                    <th>Reaction</th>
                                    <th>Severity</th>
                                    <th>Date of Onset</th>
                                    <th>Action taken</th>
                                </tr>
                                <repeat>
                                    <template>
                                        <obsgroup groupingConceptId="121689AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
                                            <tr>
                                                <td><obs conceptId="160643AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                         answerConceptIds="162543AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,72609AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162544AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162545AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162171AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162546AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162547AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162172AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162175AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,
                                                                            162176AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162548AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162177AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162542AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162536AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162537AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162538AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162539AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162540AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,
                                                                              	162541AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,5622AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                         answerLabels="Beef,Caffeine,Chocolate,Dairy Food,Eggs,Fish,Milk Protein,Peanuts,Shellfish,Soy,Strawberries,Wheat,Adhesive Tape,Bee Stings,Dust,Latex,Mold,Pollen,Ragweed,Other"
                                                         style="dropdown"


                                                />

                                                </td>
                                                <td><obs conceptId="159935AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                         answerConceptIds="1067AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,121629AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,148888AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,148787AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,120148AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,108AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,143264AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,142412AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,118773AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,140238AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,140039AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,139581AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,139084AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,159098AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,
                                                                            111061AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,117399AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,879AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,121677AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,159347AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,121AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,512AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,5622AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                         answerLabels="Unknown,Anaemia,Anaphylaxis,Angioedema,Arrhythmia,Bronchospasm,Cough,Diarrhea,Dystonia,Fever,Flushing,GI upset,Headache,Hepatotoxicity,Hives,Hypertension,Itching,Mental status change,Musculoskeletal pain,Myalgia,Rash,Other"
                                                         style="dropdown"
                                                /></td>
                                                <td><obs conceptId="162760AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"  answerConceptIds="160754AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,160755AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,160756AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,160758AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1067AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabels="Mild,Moderate,Severe,Fatal,Unknown" /></td>
                                                <td><obs conceptId="160753AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText=" " /></td>
                                                <td>
                                                    <obs conceptId="1255AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                         answerConceptIds="1257AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1259AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,981AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1258AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1107AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1260AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                         answerLabels="CONTINUE REGIMEN,CHANGE REGIMEN,DOSING CHANGE,CHANGE FORMULATION,NONE,STOP"
                                                         style="dropdown"


                                                    />

                                                </td>
                                            </tr>
                                        </obsgroup>
                                    </template>
                                    <render n="1" concept=" " />
                                    <render n="2" concept=" " />
                                    <render n="3" concept=" " />
                                    <render n="4" concept=" " />
                                    <render n="5" concept=" " />
                                </repeat>
                            </table>
                        </td>
                    </tr>
                </table>
            </fieldset>
            <!--Chronic Illnesses-->

            <fieldset>
                <legend>Chronic Illnesses and Cormobidities</legend>
                <div>
                    Patient has any chronic illnesse(s)? &#160;&#160;&#160;&#160;<input type="radio" name="chronic-illness" class="chronic-illness" value="1065"/> Yes
                    <input type="radio" name="chronic-illness" class="chronic-illness" value="1066"/> No
                </div>


                <table id="tbl-chronic-illness">
                    <tr>
                        <th style="color: #888">Illness</th>
                        <th style="color: #888; text-align: center">Onset Date</th>
                        <th style="color: #888">Drug</th>
                        <th style="color: #888; text-align: center">Dose</th>
                        <th style="color: #888; text-align: center">Units</th>
                        <th style="color: #888; text-align: center">Frequency</th>
                        <th style="color: #888; text-align: center">Duration</th>
                        <th style="color: #888; text-align: center">Duration units</th>

                    </tr>
                    <repeat>
                        <template>
                            <obsgroup groupingConceptId="159392AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
                                <tr>
                                    <td>
                                        <obs
                                                conceptId="1284AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                answerConceptIds="149019AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,148432AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,153754AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,159351AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,119270AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,120637AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,145438AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1295AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,120576AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,119692AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,120291AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,119481AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,118631AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,117855AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,117789AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,139071AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,115728AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,117399AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,117321AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,151342AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,133687AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,115115AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,114662AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,117703AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,118976AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                answerLabels="Alzheimer's Disease and other Dementias,Arthritis,Asthma,Cancer,Cardiovascular diseases,Chronic Hepatitis,Chronic Kidney Disease,Chronic Obstructive Pulmonary Disease(COPD),Chronic Renal Failure,Cystic Fibrosis,Deafness and Hearing impairment,Diabetes,Endometriosis,Epilepsy,Glaucoma,Heart Disease,Hyperlipidaemia,Hypertension,Hypothyroidism,Mental illness,Multiple Sclerosis,Obesity,Osteoporosis,Sickle Cell Anaemia,Thyroid disease"
                                                style="dropdown"
                                        />
                                    </td>

                                    <td><obs id="diagnosis-date" conceptId="159948AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" allowFutureDates="false" /></td>

                                    <td><obs conceptId="1282AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerClasses="Drug" style="autocomplete" /></td>
                                    <td><obs conceptId="1443AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" /></td>
                                    <td><obs conceptId="1444AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" size="5" /></td>
                                    <td>
                                        <obs
                                                conceptId="160855AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                answerConceptIds="160862AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,160863AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,160864AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,160865AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,160858AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,160866AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,160870AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                answerLabels="Once daily,Once daily at bedtime,Once daily in the evening,Once daily in the morning,Twice daily,Thrice daily,Four times daily"
                                        />
                                    </td>
                                    <td><obs conceptId="159368AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" /></td>
                                    <td>
                                        <obs conceptId="1732AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                             answerConceptIds="1822AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1072AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1073AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1074AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                             answerLabels="Hours,Days,Weeks,Months" />
                                    </td>

                                </tr>
                            </obsgroup>
                        </template>
                        <render n="1" concept="Drug"/>
                        <render n="2" concept="Drug"/>
                        <render n="3" concept="Drug"/>
                        <render n="4" concept="Drug"/>
                        <render n="5" concept="Drug"/>
                    </repeat>
                </table>
            </fieldset>
            <fieldset>
                <legend>Adverse Drug Reactions</legend>
                <div>
                    Patient has adverse drug reaction(s)? <input type="radio" name="adverse-reactions" class="adverse-reactions" value="1065"/> Yes
                    <input type="radio" name="adverse-reactions" class="adverse-reactions" value="1066"/> No
                </div>
                <table id="tbl-adverse-reactions">
                    <tr>
                        <td colspan="2">Record any Adverse Drug Reactions since the last visit<br/>
                            <table>
                                <tr>
                                    <th>Medicine Causing Reaction</th>
                                    <th>Reaction</th>
                                    <th>Severity</th>
                                    <th>Date of Onset</th>
                                    <th>Action taken</th>
                                </tr>
                                <repeat>
                                    <template>
                                        <obsgroup groupingConceptId="121760AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
                                            <tr>
                                                <td><obs conceptId="160643AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                         answerConceptIds="70056AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162298AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,70878AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,155060AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162299AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,155175AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,71647AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,72822AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162301AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,73300AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,73667AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,74807AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,75523AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162302AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,
                                                                            75948AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,77164AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162305AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,77675AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,78280AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,794AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,80106AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,80586AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,80696AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162306AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,81723AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,81724AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,81959AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,82023AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,
                                                                               	82559AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,82900AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,83018AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,767AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162307AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,84309AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162170AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,84795AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,84893AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,86663AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,5622AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                         answerLabels="Abicavir,ACE inhibitors,Allopurinol,Aminoglycosides,ARBs (angiotensin II receptor blockers),Aspirin,Atazanavir,Carbamazepine,Cephalosporins,Chloroquine,Codeine,Didanosine,Efavirenz,Erythromycins,Ethambutol,Griseofulvin,Heparins,Hydralazine,Isoniazid,Lopinavir/ritonavir,Morphine,Nevirapine,Nitrofurans,Non-steroidal anti-inflammatory drugs,Penicillamine,Penicillin,Phenolphthaleins,Phenytoin,Procainamide,Pyrazinamide,Quinidine,Rifampin,Statins,Stavudine,Sulfonamides,Tenofovir,Tetracycline,Zidovudine,Other"
                                                         style="dropdown"


                                                />

                                                </td>
                                                <td><obs conceptId="159935AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                         answerConceptIds="1067AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,121629AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,148888AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,148787AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,120148AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,108AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,143264AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,142412AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,118773AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,140238AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,140039AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,139581AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,139084AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,159098AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,
                                                                            111061AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,117399AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,879AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,121677AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,159347AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,121AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,512AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,5622AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                         answerLabels="Unknown,Anaemia,Anaphylaxis,Angioedema,Arrhythmia,Bronchospasm,Cough,Diarrhea,Dystonia,Fever,Flushing,GI upset,Headache,Hepatotoxicity,Hives,Hypertension,Itching,Mental status change,Musculoskeletal pain,Myalgia,Rash,Other"
                                                         style="dropdown"
                                                /></td>
                                                <td><obs conceptId="162760AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"  answerConceptIds="160754AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,160755AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,160756AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,160758AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1067AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabels="Mild,Moderate,Severe,Fatal,Unknown" /></td>
                                                <td><obs conceptId="160753AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText=" " /></td>
                                                <td>
                                                    <obs conceptId="1255AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                         answerConceptIds="1257AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1259AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,981AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1258AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1107AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1260AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                         answerLabels="CONTINUE REGIMEN,CHANGE REGIMEN,DOSING CHANGE,CHANGE FORMULATION,NONE,STOP"
                                                         style="dropdown"


                                                    />

                                                </td>
                                            </tr>
                                        </obsgroup>
                                    </template>
                                    <render n="1" concept=" " />
                                    <render n="2" concept=" " />
                                    <render n="3" concept=" " />
                                    <render n="4" concept=" " />
                                    <render n="5" concept=" " />
                                </repeat>
                            </table>
                        </td>
                    </tr>
                </table>
            </fieldset>

            <fieldset>
                <legend>Vaccination(s) today</legend>
                <includeIf velocityTest="$patient.age &lt; 15">
                <table width="30%">
                    <tr>
                        <th style="color: #888" align="left">Vaccination</th>
                        <th style="color: #888" align="left">Recent</th>
                        <th style="color: #888" align="left">Count</th>
                      </tr>

                    <tr>
                        <td><obs conceptId="1198AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="886AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="BCG" style="checkbox" /></td>
                        <td> <lookup expression="fn.latestObs(1198).valueCoded().equals(886).obsDateTime"/> </td>
                        <td> <lookup expression="fn.allObs(1198).valueCoded().equals(886).size()"/> </td>
                    </tr>
                    <tr>
                        <td><obs conceptId="1198AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="82215AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="PV" style="checkbox" /></td>
                        <td> <lookup expression="fn.latestObs(1198).valueCoded().equals(82215).obsDateTime"/> </td>
                        <td> <lookup expression="fn.allObs(1198).valueCoded().equals(82215).size()"/> </td>
                    </tr>
                    <tr>
                        <td><obs conceptId="1198AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="1423AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Penta" style="checkbox" /></td>
                        <td> <lookup expression="fn.latestObs(1198).valueCoded().equals(1423).obsDateTime"/> </td>
                        <td> <lookup expression="fn.allObs(1198).valueCoded().equals(1423).size()"/> </td>
                    </tr>
                    <tr>
                        <td><obs conceptId="1198AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="162342AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="PCV" style="checkbox" /></td>
                        <td> <lookup expression="fn.latestObs(1198).valueCoded().equals(162342).obsDateTime"/> </td>
                        <td> <lookup expression="fn.allObs(1198).valueCoded().equals(162342).size()"/> </td>
                    </tr>
                    <tr>
                        <td><obs conceptId="1198AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="36AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Measles" style="checkbox" /></td>
                        <td> <lookup expression="fn.latestObs(1198).valueCoded().equals(36).obsDateTime"/> </td>
                        <td> <lookup expression="fn.allObs(1198).valueCoded().equals(36).size()"/> </td>
                    </tr>




                </table>
                </includeIf>
                <includeIf velocityTest="$patient.age &gt; 15">
                <table width="30%">
                    <tr>
                        <th style="color: #888" align="left">Vaccination</th>
                        <th style="color: #888" align="left">Recent</th>
                        <th style="color: #888" align="left">Count</th>
                    </tr>

                    <tr>
                        <td><obs conceptId="1198AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="782AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="HBV" style="checkbox" /></td>
                        <td> <lookup expression="fn.latestObs(1198).valueCoded().equals(782).obsDateTime"/> </td>
                        <td> <lookup expression="fn.allObs(1198).valueCoded().equals(782).size()"/> </td>
                    </tr>
                    <tr>
                        <td><obs conceptId="1198AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="5261AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Flu" style="checkbox" /></td>
                        <td> <lookup expression="fn.latestObs(1198).valueCoded().equals(5261).obsDateTime"/> </td>
                        <td> <lookup expression="fn.allObs(1198).valueCoded().equals(82215).size()"/> </td>
                    </tr>

                </table>
                <table>
                    <tr>
                        <td><obs conceptId="1198AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="5622AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Other" style="checkbox"
                        /><obs conceptId="160632AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" /></td>

                        <td> <lookup expression="fn.latestObs(1198).valueCoded().equals(5622).obsDateTime"/> </td>
                        <td> <lookup expression="fn.allObs(1198).valueCoded().equals(5622).size()"/> </td>
                    </tr>
                </table>
                </includeIf>
            </fieldset>

            <!--Sexual and Obstetric History-->
            <a id="reproductive-section"></a>
            <table class="link" width="100%">
                <tr>
                    <td width="80%">
                        <div class="nav-links">
                            <a href="#visit-summary-section">Visit Summary</a> |<a href="#complaints-section">Complaints</a> | <a href="#tb-screening-section">TB Screening</a> | <a href="#allergies-chronic-illnesses-section">Allergies &amp; other Illnesses</a> | <a href="#physical-exam-section">Physical Examination</a> | <a href="#treatment-plan-section">Treatment Plan</a>
                        </div>
                    </td>
                    <td width="20%"> <div><a class="show-nav-links"></a></div></td>
                </tr>
            </table>
              <!--Sexual and reproductive History validated for women over 10 years -->

               <includeIf velocityTest="($patient.gender == 'F') &amp;&amp; ($patient.age &gt; 10)">
             <fieldset >
                    <legend>Sexual and Reproductive History</legend>
                        <table class="right-aligned-first" style="width: 100%;" border="0">
                            <tr>
                                <td style="text-align: left" colspan="3">
                                    <obs id="lmp-date" labelText="LMP:  &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;"
                                         conceptId="1427AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/>
                                    <span class="value"><recentObs conceptId="1427AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/></span>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="3" style="text-align: left">
                                    <obs conceptId="5272AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                         labelText="Patient Pregnant?: &#160;&#160;&#160;&#160;&#160;&#160;&#160;"
                                         answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                         style="radio" answerLabels="Yes,NO" id="pregnancyOption"/>
                                </td>
                            </tr>
                        </table>
                        <div id="wants-pregnancy">
                            Wants to get pregnant in the next three months? <br/>
                            <obs conceptId="1426AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                 answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                 style="radio" answerLabels="Yes,NO" />
                        </div>
                        <table id="pregnancyOptionValues">
                            <tr>
                                <td width="8%" style="text-align: left">ANC Number:</td>
                                <td>
                                    <obs conceptId="1425AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText=" "/>
                                </td>
                                <td></td>
                            </tr>
                            <tr>
                                <td style="text-align: left">EDD:</td>
                                <td colspan="2">
                                    <obs conceptId="5596AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" showTime="false"
                                         allowFutureDates="true" labelText=" " id="patient-edd" readonly="true"/>
                                    <span class="value"><recentObs conceptId="5596AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/></span>
                                </td>
                            </tr>
                            <tr>
                                    <td style="text-align: left">ANC/PNC Profile</td>
                                    <td>
                                        <obs conceptId="159423AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabels="Yes,No" style="radio" />
                                    </td>
                            </tr>
                            <tr>
                                <td>Parity:</td>
                                <td>
                                    <obs id="parity-term" conceptId="160080AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"  />
                                    +
                                    <obs  id="parity-abortion" conceptId="1823AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" />
                                </td>
                            </tr>
                            <tr>
                                <td>Gravida:</td>
                                <td>
                                    <obs conceptId="5624AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"  id="gravida"/>
                                </td>
                            </tr>
                        </table>
                        <table>

                            <tr>
                                <td>Screened CaCx</td>
                                <td><obs conceptId="159777AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptIds="703AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,664AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1118AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabels="Positive,Negative,Not Done" style="radio" /></td>
                            </tr>
                            <tr >
                                <td>Screened STI</td>
                                <td class="patient-details"><obs id="screened-sti" conceptId="161558AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptIds="703AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,664AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1118AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabels="Positive,Negative,Not Done" style="radio" /></td>
                            </tr>
                        </table>
                     <table id="tbl-partner-notification">
                            <tr >
                                <td>STI Patrner Notification</td>
                                <td><obs conceptId="161558AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabels="Yes,No" style="radio" /></td>
                            </tr>
                        </table>
                    </fieldset>
                </includeIf>
                <!--Family Planning-->
                <fieldset id="fp-details" >
                    <legend>Family Planning Status</legend>
                    <table id="fpOptionValues">
                        <tr>
                            <td colspan="2">
                                Family Planning Status :
                                <obs conceptId="160653AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" id="fplanning"
                                     answerConceptIds="965AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,160652AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1360AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                     style="dropdown"
                                     answerLabels="On Family Planning,Not using Family Planning,Wants Family Planning"/>
                                <hr/>
                                <br/>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <div id="onFp">
                                    If currently using Family Planning, or wants Family Planning, specify which method(s)
                                    <hr/>
                                    <includeIf velocityTest="$patient.gender == 'F' ">
                                        <table class="right-aligned-first" style="width: 100%;" border="0">
                                            <obsgroup groupingConceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
                                                <tr>

                                                    <td style="text-align: left">
                                                        <div style="float: left; padding-right: 50px">
                                                        <obs conceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerConceptId="160570AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerLabel="Emergency contraceptive pills" style="checkbox"/>
                                                            <br />
                                                        <obs conceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerConceptId="780AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerLabel="Oral Contraceptives Pills" style="checkbox"/>
                                                            <br />
                                                        <obs conceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerConceptId="5279AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerLabel="Injectible" style="checkbox"/>
                                                            <br />
                                                        <obs conceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerConceptId="1359AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerLabel="Implant" style="checkbox"/>
                                                            <br />
                                                        <obs conceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerConceptId="5275AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerLabel="Intrauterine Device" style="checkbox"/>
                                                            <br />
                                                        <obs conceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerConceptId="136163AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerLabel="Lactational Amenorhea Method" style="checkbox"/>
                                                            <br />
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div style="float: left; padding-right: 50px">
                                                        <obs conceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerConceptId="5278AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerLabel="Diaphram/Cervical Cap" style="checkbox"/>
                                                           <br />
                                                        <obs conceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerConceptId="159524AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerLabel="Fertility Awareness"
                                                             style="checkbox"/>
                                                            <br />
                                                        <obs conceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerConceptId="1472AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerLabel="Tubal Ligation" style="checkbox"/>
                                                            <br />
                                                        <obs conceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerConceptId="190AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerLabel="Condoms" style="checkbox"/>
                                                            <br />
                                                        <obs conceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerConceptId="1489AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerLabel="Vasectomy(Partner)" style="checkbox"/>
                                                            <br />
                                                        <obs conceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerConceptId="1175AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerLabel="Undecided" style="checkbox" id="fp-error"/>
                                                            <br />
                                                        </div>
                                                    </td>
                                                </tr>
                                            </obsgroup>
                                        </table>
                                    </includeIf>

                                    <includeIf velocityTest="$patient.gender == 'M' ">
                                        <table class="right-aligned-first" style="width: 100%;" border="0">
                                            <obsgroup groupingConceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
                                                <tr>
                                                    <td style="text-align: left">
                                                        <obs conceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerConceptId="190AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerLabel="Condoms" style="checkbox"/>
                                                        <br/>
                                                        <obs conceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerConceptId="1489AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerLabel="Vasectomy" style="checkbox"/>
                                                        <br/>
                                                        <obs conceptId="374AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerConceptId="1175AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerLabel="Undecided" style="checkbox" id="fp-error"/>
                                                        </td>

                                                </tr>
                                            </obsgroup>
                                        </table>
                                    </includeIf>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <div id="notOnFp">
                                    <br/>Not using Family Planning? Specify reason(s)
                                    <hr/>
                                    <includeIf velocityTest="$patient.gender == 'F' ">
                                        <table style="width: 70%" border="0">
                                            <obsgroup groupingConceptId="160575AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
                                                <tr>
                                                    <td>
                                                        <div style="float: left; padding-right: 50px">
                                                        <obs conceptId="160575AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerConceptId="160572AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerLabel="Thinks can't get pregnant"
                                                             style="checkbox"/>
                                                        <br/>
                                                        <obs conceptId="160575AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerConceptId="160573AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerLabel="Not sexually active now"
                                                             style="checkbox"/>
                                                        <br/>
                                                            <obs conceptId="160575AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                               answerConceptId="5622AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                               answerLabel="Other"
                                                               style="checkbox" id="notOnfp-error" />

                                                        </div> </td>
                                                </tr>
                                            </obsgroup>
                                        </table>
                                    </includeIf>
                                    <includeIf velocityTest="$patient.gender == 'M' ">
                                        <table style="width: 100%" border="0">
                                            <obsgroup groupingConceptId="160575AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
                                                <tr>
                                                    <td width="10%"></td>
                                                    <td>
                                                        <obs conceptId="160575AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerConceptId="160573AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                             answerLabel="Not sexually active now"
                                                             style="checkbox"/>
                                                    </td>
                                                </tr>
                                            </obsgroup>
                                        </table>
                                    </includeIf>
                                </div>
                            </td>
                        </tr>
                    </table>
        </fieldset>


        <!--Physical Examination-->
            <!--General Examination-->
            <a id="physical-exam-section"></a>
            <table class="link" width="100%">
                <tr>
                    <td width="80%">
                        <div class="nav-links">
                            <a href="#visit-summary-section">Visit Summary</a> | <a href="#complaints-section">Complaints</a> | <a href="#tb-screening-section">TB Screening</a> | <a href="#allergies-chronic-illnesses-section">Allergies &amp; other Illnesses</a> | <a href="#reproductive-section">Reproductive History</a> | <a href="#treatment-plan-section">Treatment Plan</a>

                        </div>
                    </td>
                    <td width="20%"> <div><a class="show-nav-links"></a></div></td>
                </tr>
            </table>
            <fieldset>
                <legend>General Examination Findings</legend>
                <table id="general-exam-findings">
                    <tr>
                        <td colspan="3">
                            <div style="float: left; padding-right: 50px">
                                <obs conceptId="162737AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="1107AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="None" /><br />
                                <obs conceptId="162737AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="136443AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Jaundice" /><br />
                                <obs conceptId="162737AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="460AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Oedema" /><br />
                                <obs conceptId="162737AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="5334AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Oral thrush" /><br />
                                <obs conceptId="162737AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="5245AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Pallor" /><br />

                            </div>
                        </td><td>
                            <div style="float: left;padding-right: 50px">

                                <obs conceptId="162737AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="140125AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Finger Clubbing" /><br />
                                <obs conceptId="162737AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="126952AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Lymph Node Axillary" /><br />
                                <obs conceptId="162737AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="143050AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Cyanosis" /><br />
                                <obs conceptId="162737AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="126939AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Lymph Nodes Inguinal" /><br />
                                <obs conceptId="162737AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="823AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Wasting" />

                            </div>
                    </td><td>
                        <div style="float: left;padding-right: 40px">
                                <obs conceptId="162737AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="142630AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Dehydration" /><br />
                                <obs conceptId="162737AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="116334AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Lethargic" /><br />
                                <!--<obs conceptId="162737AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="983AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Weight Changes" /><br />-->
                            </div>
                    </td>

                    </tr>
                </table>
            </fieldset>

            <!--System Examination-->
            <fieldset>
                <legend>System Examination</legend>
                <div>
                    Any abnormal finding(s) on system review?  &#160;&#160;&#160;&#160; <input type="radio" name="systems-review" class="systems-review" value="1065"/> Yes
                    <input type="radio" name="systems-review" class="systems-review" value="1066"/> No
                </div>
                <br />
                <table style="width: 70%;" border="0" id="tbl-systems-review">
                    <tr>
                        <th align="left">No. </th>
                        <th align="left">System Review</th>
                        <th align="left">Findings</th>
                        <th align="left">Findings Notes</th>
                    </tr>
                    <tr>
                        <td>1.</td>
                        <td>Skin</td>
                        <td><obs
                                conceptId="1120AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                answerConceptIds="150555AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,125201AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,135591AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,136455AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,507AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1249AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,5244AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                answerLabels="Abscess,Swelling/Growth,Hair Loss,Itching,Kaposi Sarcoma,Skin eruptions/Rashes,Oral sores"
                                style="dropdowm"
                        /></td>

                        <td><obs conceptId="160981AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" rows="1" cols="50"
                              />
                        </td>
                    </tr>
                    <tr>
                        <td>2.</td>
                        <td>Eyes</td>
                        <td><obs
                                conceptId="163309AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                answerConceptIds="123074AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,135591AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,131040AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,127777AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,140827AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,127276AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                answerLabels="Visual Disturbance,Excessive tearing,Eye pain,Eye redness,Light sensitive,Itchy eyes"
                                style="dropdowm"
                        /></td>

                        <td><obs conceptId="163042AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" rows="1" cols="50"
                        />
                        </td>
                    </tr>
                    <tr>
                        <td>3.</td>
                        <td>ENT</td>
                        <td><obs
                                conceptId="163336AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                answerConceptIds="148517AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,139075AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,119558AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,118536AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,106AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,147230AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,135841AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,117698AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,138554AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,507AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,582AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,128055AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,133499AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,145298AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,110099AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,126423AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,126318AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,158843AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,5244AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,5334AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,123588AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,124601AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,123919AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,111525AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                answerLabels="Apnea,Hearing disorder,Dental caries,Erythema,Frequent colds,Gingival bleeding,Hairy cell leukoplakia,Hearing loss,Hoarseness,Kaposi Sarcoma,Masses,Nasal discharge,Nosebleed,Pain,Post nasal discharge,Sinus problems,Snoring,Sore thoat,Oral sores,Thrush,Tinnitus,Toothache,Ulcers,Vertigo"
                                style="dropdowm"
                        /></td>

                        <td><obs conceptId="163042AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" rows="1" cols="50"
                        />
                        </td>
                    </tr>
                    <tr>
                        <td>4.</td>
                        <td>Chest</td>
                        <td><obs
                                conceptId="1123AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                answerConceptIds="146893AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,127640AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,145712AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,164440AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,127639AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,5209AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                answerLabels="Bronchial breathing,Crackles,Dullness,Reduced breathing,Respiratory distress,Wheezing"
                                style="dropdowm"
                        /></td>

                        <td><obs conceptId="163042AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" rows="1" cols="50"
                        />
                        </td>
                    </tr>
                    <tr>
                    <td>5.</td>
                    <td>CVS</td>
                    <td><obs
                            conceptId="1124AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                            answerConceptIds="140147AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,136522AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,562AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,130560AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                            answerLabels="Elevated blood pressure,Irregular heartbeat,Cardiac murmur,Cardiac rub"
                            style="dropdowm"
                    /></td>

                    <td><obs conceptId="163046AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" rows="1" cols="50"
                    />
                    </td>
                </tr>
                    <tr>
                        <td>6.</td>
                        <td>Abdomen</td>
                        <td><obs
                                conceptId="1125AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                answerConceptIds="150915AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,5008AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,5103AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,5009AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,5105AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                answerLabels="Abdominal distension,Hepatomegaly,Abdominal mass,Splenomegaly,Abdominal tenderness"
                                style="dropdowm "
                        /></td>

                        <td><obs conceptId="160947AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" rows="1" cols="50"
                        />
                        </td>
                    </tr>
                    <tr>
                        <td>7.</td>
                        <td>CNS</td>
                        <td><obs
                                conceptId="1130AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                answerConceptIds="118872AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1836AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,150817AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,120345AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,157498AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,112721AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,136282AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                answerLabels="Altered sensation,Bulging fontenelle,Abnormal reflexes,Confusion,Limb weakness,Stiff neck,Kernicterus"
                                style="dropdowm"
                        /></td>

                        <td><obs conceptId="160994AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" rows="1" cols="50"
                        />
                        </td>
                    </tr>
                    <tr>
                        <td>8.</td>
                        <td>Genitourinary </td>
                        <td><obs
                                conceptId="1126AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                answerConceptIds="147241AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,154311AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,123529AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,123396AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,124087AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                answerLabels="Bleeding,Rectal discharge,Urethral discharge,Vaginal discharge,Ulceration "
                                style="dropdowm"
                        /></td>

                        <td><obs conceptId="163047AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" rows="1" cols="50"
                        />
                        </td>
                    </tr>
                </table>
        </fieldset>
        </fieldset>

        <a id="treatment-plan-section"></a>
        <table class="link" width="100%">
            <tr>
                <td width="80%">
                    <div class="nav-links">
                        <a href="#visit-summary-section">Visit Summary</a> | <a href="#complaints-section">Complaints</a> | <a href="#tb-screening-section">TB Screening</a> | <a href="#allergies-chronic-illnesses-section">Allergies &amp; other Illnesses</a> | <a href="#reproductive-section">Reproductive History</a>
                    </div>
                </td>
                <td width="20%"> <div><a class="show-nav-links"></a></div></td>
            </tr>
        </table>
        <fieldset>

            <legend>Treatment/Management Plan</legend>
            <table style="width: 70%;" border="0">
                <tr>
                    <th align="left">Diagnosis</th>
                    <th align="left">Treatment Plan</th>
                </tr>

                <repeat>
                    <template>
                        <obsgroup groupingConceptId="6042AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
                        <tr>

                            <td>
                                <obs conceptId="6042AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerClasses="Diagnosis" style="autocomplete"/>
                            </td>
                            <td>
                                <obs conceptId="160430AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" rows="1" cols="80"/>
                            </td>

                        </tr>
                        </obsgroup>
                    </template>
                    <render n="11" concept="Diagnosis"/>
                    <render n="12" concept="Diagnosis"/>
                    <render n="13" concept="Diagnosis"/>
                    <render n="14" concept="Diagnosis"/>
                    <render n="15" concept="Diagnosis"/>

                </repeat>


            </table>
        </fieldset>
        <fieldset>
            <legend>Cotrimoxazole/Dapsone</legend>
            <table>
                <tr>
                    <td>
                        <table cellpadding="0" border="0" cellspacing="5">
                            <tr>
                                <td>Adherence</td>
                                <td>
                                    <obs
                                            conceptId="161652AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                            answerConceptIds="159405AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,163794AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,159407AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                            answerLabels="Good (G),Inadequate (I),Poor (P)"
                                            style="radio"
                                    />
                                </td>
                            </tr>
                            <tr>
                                <td>Dispensed</td>
                                <td>
                                    <obs
                                            conceptId="162229AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                            answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1175AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                            answerLabels="Yes,No,Not applicable (N/A)"
                                            style="radio"
                                    />
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </fieldset>

        <fieldset>
            <legend>ARV</legend>
            <table>
                <tr>
                    <td>
                        <table cellpadding="0" border="0" cellspacing="5">
                            <tr>
                                <td>Adherence</td>
                                <td>
                                    <obs
                                            conceptId="1658AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                            answerConceptIds="159405AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,163794AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,159407AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                            answerLabels="Good (G),Inadequate(I),Poor (P)"
                                            style="radio"
                                    />
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </fieldset>

        <fieldset >
            <legend>PHDP Services</legend>
            <table>
                <tr>
                    <td>Has the client been given condoms this visit?</td>
                    <td><obs conceptId="159777AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1067AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerLabels="Yes,No,Unkown"
                             style="radio"

                    /></td>
                </tr>
                <tr>
                    <td>Has the Client disclosed HIV status to their sexually active partner?</td>
                    <td><obs conceptId="159423AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1067AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerLabels="Yes,No,Unkown"
                             style="radio"
                    /></td>
                </tr>
                <tr>
                    <td>Has the client's partner received on-site HIV testing?</td>
                    <td><obs conceptId="161557AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1067AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerLabels="Yes,No,Unkown"
                             style="radio"
                    /></td>
                </tr>
                <tr>
                    <td>Has the client been screened for STI (in this visit)?</td>
                    <td><obs conceptId="161558AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1067AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerLabels="Yes,No,Unkown"
                             style="radio"
                    /></td>
                </tr>
            </table>
        </fieldset >
        <fieldset>
            <legend>Return Visit</legend>
            <table>
                <tr>
                    <td>Return Visit Date:</td>
                    <td><obs conceptId="5096AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" allowFutureDates="true" labelText=" " id="returnVisitDate" />
                        Reason*:
                        <obs conceptId="160288AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerConceptIds="160523AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1283AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,159382AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,160521AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,5622AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerLabels="Follow up,Lab tests,Counseling,Pharmacy Refill,Other,"
                             style="dropdowm"  />
                    </td>

                </tr><tr></tr>
                <tr>
                    <td>Differentiated Care</td>

                    <td>

                        <obs conceptId="1758AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" id="fast-track"
                             answerConceptIds="1744AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1555AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,5618AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1537AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             style="dropdown"
                             answerLabels="Fast Track,Community ART Distribution - HCW Led,Community ART Distribution - Peer Led,Facility ART Distribution Group"/>
                    </td>
                </tr>

            </table>
        </fieldset>

    </div>

    <div class="ke-form-footer">
        <submit/>
    </div>

</htmlform>

