<!--
  ~ The contents of this file are subject to the OpenMRS Public License
  ~ Version 1.0 (the "License"); you may not use this file except in
  ~ compliance with the License. You may obtain a copy of the License at
  ~ http://license.openmrs.org
  ~
  ~ Software distributed under the License is distributed on an "AS IS"
  ~ basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
  ~ License for the specific language governing rights and limitations
  ~ under the License.
  ~
  ~ Copyright (C) OpenMRS, LLC.  All Rights Reserved.
-->
<htmlform>

	<style type="text/css">
		table.hei {
			border-collapse: collapse;
			background-color: #fff0f7;
		}
		table.hei > tbody > tr > td, table.hei > tbody > tr > th {
			border: 1px solid black;
			vertical-align: baseline;
			padding: 4px;
			text-align: left;
		}
		.no-close .ui-dialog-titlebar-close {
			display: none;
		}
	</style>

	<script type="text/javascript">

        var birthdate = new Date("<lookup expression="patient.birthdate" />");
        var patientId = <lookup expression="patient.patientId"/>;
        var GREENCARD_VELOCITY = "<lookup expression="kenyaemr.GreenCardVelocityCalculation()" />";
        var PATIENT_ON_ART = GREENCARD_VELOCITY.split(",")[2].split(":")[1];
        var REGIMEN_NAME = GREENCARD_VELOCITY.split(",")[4].split(":")[1];
        var encDate = new Date();
        var ctxPath = typeof openmrsContextPath === 'string' ? openmrsContextPath : OPENMRS_CONTEXT_PATH;

        var YES_CONCEPT_ID = 1065;
        var NO_CONCEPT_ID = 1066;
        var EXPOSURE_TO_HIV_ID = 822;
        var SPECIAL_CARE = 161628;
        var UNKOWN = 1067;
        //Start on ready
        jq(function() {
            //defaults
            jq('#reasonsForSpecialCare :input').prop('disabled', true);
            //get cohort
            getCohort();
            jq('#child-status-required').hide();
            //validate transfer in details
            onTransferStatusChange()
            jq('#transfer-status input').click(onTransferStatusChange);
            tbContactInHouseHold();
            jq('#tbcontact input').click(tbContactInHouseHold);
            pmtctDrugsForMother();
            jq('#pmtctDrugsReceived input').click(pmtctDrugsForMother);
            onARTatEnrollment();
            jq('#onART input').change(onARTatEnrollment);

            jq('#heiNumberError').hide();
            jq("#hei-id input[type=text]").blur(checkForExistingPatientHeiIdentifiers);

            jq('#cwcNumberError').hide();
            jq("#cwc-id input[type=text]").blur(checkForExistingPatientCwcIdentifiers);

            jq('#specialCare input').change(needSpecialCare);
            //including the mother details
            motherIsAlive();
            includeMothersCccNumber();
            includeMotherCurrentlyARTRegimen();
            includeMothersNames();
            //include the father details if any
            includeFathersNames();
            //include the guardian details if any
            includeGuardiansNames();
            includeBirthGestation();
            includeBirthWeight();
            includeBirthLocation();
            includeBirthType();
            includeBirthOutcome();

            //disable arv prophylaxis when a child is NOT exposed and enable whenever they are exposed
            jq('#hiv-exposed-child input').click(heiInfants);

            beforeSubmit.push(function() {
                var pcn = jq('#pcn-id input[type=text]').val();

                if (getValue('hiv-exposed-child.value') == "") {
                    jq('#child-status-required').show();
                    jq('#child-status-required').html('Please specify the condition of the child');
                    return false;
                }
                if (getValue('hiv-exposed-child.value') == EXPOSURE_TO_HIV_ID &amp;&amp; jq('#hei-id :input').val() == "") {
                    jq('#child-status-required').show();
                    jq('#child-status-required').html('HEI Unique Number Required');
                    return false;
                }
                if(pcn != "" || pcn != null) {
                    if (/^[\d]{1,15}$/.test(pcn) === false) {
                        alert("Invalid Patient Clinic Number Format! Should be at most 15 digits for new enrollments");
                        return false;
                    }
                }
                if (getValue('hiv-exposed-child.value') == NO_CONCEPT_ID || getValue('hiv-exposed-child.value') == UNKOWN) {
                    jq.getJSON('/' + OPENMRS_CONTEXT_PATH + '/kenyaemr/patient/patientUtils/getMothersUniquePatientNumber.action', {patientId: patientId}, function (data) {
                        if (data != null || data != "") {
                            cccNumber = data;
                            if (!cccNumber) {
                            } else {
                                return false;
                            }
                        }
                    });
                }
                return true;
            });

        });

        function checkForExistingPatientIdentifiers() {
            var upnEntered = jq('#hiv-id input[type=text]').val();
            jq.getJSON('/' + ctxPath + '/kenyaemr/emrUtils/identifierExists.action', { upn: upnEntered }, function(data) {
                jq('#upnError').hide();
                if (data.upnExists === true) {

                    jq('#upnError').text("A patient with similar UPN already exists. Please correct before proceeding");
                    jq('#upnError').show();
                    jq('#hiv-id input[type=text]').focus();
                }
            });
        }

        //End on ready
        function onTransferStatusChange() {
            if (getValue('transfer-status.value') == NO_CONCEPT_ID) {
                jq('#transfer-details :input').prop('disabled', true);
            }
            else if (getValue('transfer-status.value') == YES_CONCEPT_ID) {
                jq('#transfer-details :input').prop('disabled', false);
            }
            else {
                jq('#transfer-details :input').prop('disabled', true);
            }
        }

        function getCohort(){
            var month = new String(birthdate.getMonth()+1);
            if(month.length == 1) {
                month = '0'+month;
                var cohort = month +"-"+ (birthdate.getUTCFullYear());
                jq('#calculated-cohort').html(cohort);
            }
            else {
                var cohort = month +"-"+ (birthdate.getUTCFullYear());
                jq('#calculated-cohort').html(cohort);
            }
        }

        function tbContactInHouseHold(){
            if (getValue('tbcontact.value') == NO_CONCEPT_ID) {
                jq('#yesTbContact').hide();
            }
            else if (getValue('tbcontact.value') == YES_CONCEPT_ID) {
                jq('#yesTbContact').show();
            }
            else {
                jq('#yesTbContact').hide();
            }
        }

        function pmtctDrugsForMother(){
            if (getValue('pmtctDrugsReceived.value') == NO_CONCEPT_ID) {
                jq('#mother-art-details :input').prop('disabled', true);
            }
            else if (getValue('pmtctDrugsReceived.value') == YES_CONCEPT_ID) {
                jq('#mother-art-details :input').prop('disabled', false);
            }
            else {
                jq('#mother-art-details :input').prop('disabled', true);
            }
        }

        function onARTatEnrollment(){
            if (getValue('onART.value') == NO_CONCEPT_ID) {
                jq('#mother-on-art-at-enrollment :input').prop('disabled', true);
            }
            else if (getValue('onART.value') == YES_CONCEPT_ID) {
                jq('#mother-on-art-at-enrollment :input').prop('disabled', false);
            }
            else {
                jq('#mother-on-art-at-enrollment :input').prop('disabled', true);
            }
        }

        function needSpecialCare(){
            if (getValue('specialCare.value') == NO_CONCEPT_ID) {
                jq('#reasonsForSpecialCare :input').prop('disabled', true);
            }
            else if (getValue('specialCare.value') == SPECIAL_CARE) {
                jq('#reasonsForSpecialCare :input').prop('disabled', false);
            }
            else {
                jq('#reasonsForSpecialCare :input').prop('disabled', true);
            }
        }
        //Determine if mother is alive
        function motherIsAlive() {
            jq.getJSON('/' + OPENMRS_CONTEXT_PATH +  '/kenyaemr/patient/patientUtils/getMothersLiveStatus.action',{ patientId: patientId },function(data) {
                var motherName;
                for (var p in data) {
                    motherName = data[p].name;
                }
                if(motherName != null){
                    jq(".mother-alive input[value=true]").prop("checked", true);
                } else{
                    jq(".mother-alive input[value=true]").prop("checked", false);
                }
            });
        }
        //Include Mothers Details
        //CCC Number
        function includeMothersCccNumber() {
            var cccNumber;
            jq.getJSON('/' + OPENMRS_CONTEXT_PATH + '/kenyaemr/patient/patientUtils/getMothersUniquePatientNumber.action', {patientId: patientId}, function (data) {
                if (data != null || data != "") {
                    cccNumber = data;
                    getField('mothers-ccc.value').val(cccNumber);
                } else {
                    getField('mothers-ccc.value').val("");
                }
                //Prepopulate hei exposure status
                if (!cccNumber) {
                    heiInfants()
                } else {
                    jq("#hiv-exposed-child input[value=822]").prop("checked", true);
                    heiInfants()
                }
            });
        }
        //On ART
        function includeMotherCurrentlyARTRegimen() {
            var encounterDate = getValue('encounter-date.value');
            jq.getJSON('/' + OPENMRS_CONTEXT_PATH + '/kenyaemr/patient/patientUtils/currentMothersArvRegimen.action', { patientId: patientId, now: encounterDate })
                .done(function(data) {
                    var msg = data.regimen;
                    if(msg != ""){
                        jq("#onART input[value=1065]").prop("checked", true);
                        jq('#current-mothers-regimen').html(msg);
                    }else{
                        jq("#onART input[value=1066]").prop("checked", true);
                    }
                });
        }

        function includeMothersNames() {
            jq.getJSON('/' + OPENMRS_CONTEXT_PATH +  '/kenyaemr/patient/patientUtils/getMothers.action',{ patientId: patientId },function(data) {
                var registered_location = "<lookup expression="kenyaemr.location()" />";
                var motherName;
                for (var p in data) {
                    motherName = data[p].name;
                }
                jq('#mother-name-list').html(motherName);
                if(motherName != null) {
                    getField('facility-registered.value').val(registered_location);
                }
            });
        }
        function includeFathersNames() {
            jq.getJSON('/' + OPENMRS_CONTEXT_PATH +  '/kenyaemr/patient/patientUtils/getFathers.action',{ patientId: patientId },function(data) {
                var fatherName;
                for ( var p in data){
                    fatherName = data[p].name;
                }
                jq('#father-name-list').html(fatherName);
            });
        }
        function includeGuardiansNames() {
            jq.getJSON('/' + OPENMRS_CONTEXT_PATH +  '/kenyaemr/patient/patientUtils/getGuardians.action',{ patientId: patientId },function(data) {
                var guardianName;
                for ( var p in data){
                    guardianName = data[p].name;
                }
                jq('#guardian-name-list').html(guardianName);
            });
        }
        //Birth gestation
        function includeBirthGestation() {
            var encounterDate = getValue('encounter-date.value');
            jq.getJSON('/' + OPENMRS_CONTEXT_PATH + '/kenyaemr/patient/patientUtils/heiDetailsFromDelivery.action', { patientId: patientId, now: encounterDate })
                .done(function(data) {
                    var msg = data.gestation;
                    console.log("Gestation ==>"+msg);
                    if(msg != ""){
                        getField('gestation.value').val(msg);
                    }else{
                        getField('gestation.value').val("");
                    }
                });
        }
        //Birth weight
        function includeBirthWeight() {
            var encounterDate = getValue('encounter-date.value');
            jq.getJSON('/' + OPENMRS_CONTEXT_PATH + '/kenyaemr/patient/patientUtils/heiDetailsFromDelivery.action', { patientId: patientId, now: encounterDate })
                .done(function(data) {
                    var msg = data.birthWeight;
                    if(msg != ""){
                        getField('weight.value').val(msg);
                    }else{
                        getField('weight.value').val("");
                    }
                });
        }
        //Birth location
        function includeBirthLocation() {
            var encounterDate = getValue('encounter-date.value');
            jq.getJSON('/' + OPENMRS_CONTEXT_PATH + '/kenyaemr/patient/patientUtils/heiDetailsFromDelivery.action', { patientId: patientId, now: encounterDate })
                .done(function(data) {
                    var msg = data.birthLocation;
                    console.log("Location ==>"+msg);
                    if(msg == 'HOME' ){
                        getField('birth-place.value').prop("selectedIndex", 2);
                    }
                    else if(msg == 'Other' ){
                        getField('birth-place.value').prop("selectedIndex", 3);
                    }
                    else if(msg == ''){
                        getField('birth-place.value').prop("selectedIndex", 0);
					}
                    else{
                        getField('birth-place.value').prop("selectedIndex", 1);
                    }
                 });
        }
        //Birth type
        function includeBirthOutcome() {
            var encounterDate = getValue('encounter-date.value');
            jq.getJSON('/' + OPENMRS_CONTEXT_PATH + '/kenyaemr/patient/patientUtils/heiDetailsFromDelivery.action', { patientId: patientId, now: encounterDate })
                .done(function(data) {
                    var msg = data.birthOutcome;
                    if(msg == 'singleton' ){
                        getField('birth-outcome.value').prop("selectedIndex", 1);
                    }
                    if(msg == 'Twins' ){
                        getField('birth-outcome.value').prop("selectedIndex", 2);
                    }
                    if(msg == 'triplets' ){
                        getField('birth-outcome.value').prop("selectedIndex", 3);
                    }
                    if(msg == '' ){
                        getField('birth-outcome.value').prop("selectedIndex", 0);
                    }
                });
        }
        //Birth type
        function includeBirthType() {
            var encounterDate = getValue('encounter-date.value');
            jq.getJSON('/' + OPENMRS_CONTEXT_PATH + '/kenyaemr/patient/patientUtils/heiDetailsFromDelivery.action', { patientId: patientId, now: encounterDate })
                .done(function(data) {
                    var msg = data.birthType;
                    if(msg == 'Spontaneous vaginal delivery'){
                        jq("#birth-type input[value=1070]").prop("checked", true);
                    }else{
                        jq("#birth-type input[value=1071]").prop("checked", true);
                    }
                });
        }

        function heiInfants() {
            var heixposedStatus = getValue('hiv-exposed-child.value');
            if (getValue('hiv-exposed-child.value') == '') {
                jq('#arv-prophylaxis :input').prop('disabled', true);
                jq('#on-art-at-enrollment-of-infant :input').prop('disabled', true);
                jq('#hei-identifiers').hide();
                jq('#arv-prophylaxis').hide();
                jq('#mother-arv-prophylaxis').hide();
                clearHiddenSections(jq('#arv-prophylaxis-no'));
                clearHiddenSections(jq('#on-art-at-enrollment-of-infant'));
                clearHiddenSections(jq('#hei-id'));
                clearHiddenSections(jq('#spd'));
                getField('child-prophylaxis.value').val("");
                clearHiddenSections(jq('#child-nvp'));
                clearHiddenSections(jq('#mother-on-art-at-enrollment1'));
                clearHiddenSections(jq('#onART'));
                clearHiddenSections(jq('#facility-registered'));
            }

            if (getValue('hiv-exposed-child.value') == EXPOSURE_TO_HIV_ID) {
                jq('#hei-identifiers').show();
                jq('#arv-prophylaxis').show();
                jq('#mother-arv-prophylaxis').show();
                jq('#hei-id :input').prop('disabled', false);
                jq('#spd :input').prop('disabled', false);
                jq('#arv-prophylaxis :input').prop('disabled', false);
                jq('#on-art-at-enrollment-of-infant :input').prop('disabled', false);
            }

            if (getValue('hiv-exposed-child.value') == NO_CONCEPT_ID || getValue('hiv-exposed-child.value') == UNKOWN) {
                jq('#arv-prophylaxis :input').prop('disabled', true);
                jq('#on-art-at-enrollment-of-infant :input').prop('disabled', true);
                jq('#hei-identifiers').hide();
                jq('#arv-prophylaxis').hide();
                jq('#mother-arv-prophylaxis').hide();
                clearHiddenSections(jq('#arv-prophylaxis-no'));
                clearHiddenSections(jq('#on-art-at-enrollment-of-infant'));
                clearHiddenSections(jq('#hei-id'));
                clearHiddenSections(jq('#spd'));
                getField('child-prophylaxis.value').val("");
                clearHiddenSections(jq('#child-nvp'));
                clearHiddenSections(jq('#mother-on-art-at-enrollment1'));
                clearHiddenSections(jq('#onART'));
                clearHiddenSections(jq('#facility-registered'));
            }
        }
        function checkForExistingPatientHeiIdentifiers() {
            var heiNumberEntered = jq('#hei-id input[type=text]').val();
            jq.getJSON('/' + ctxPath + '/kenyaemr/emrUtils/identifierExists.action', { heiNumber: heiNumberEntered }, function(data) {
                jq('#heiNumberError').hide();
                if (data.heiNumberExists === true) {

                    jq('#heiNumberError').text("A patient with similar HEI ID already exists. Please correct before proceeding");
                    jq('#heiNumberError').show();
                    jq('#hei-id input[type=text]').focus();
                }
            });
        }
        function checkForExistingPatientCwcIdentifiers() {
            var cwcNumberEntered = jq('#cwc-id input[type=text]').val();
            jq.getJSON('/' + ctxPath + '/kenyaemr/emrUtils/identifierExists.action', { cwcNumber: cwcNumberEntered }, function(data) {
                jq('#cwcNumberError').hide();
                if (data.cwcNoExists === true) {

                    jq('#cwcNumberError').text("A patient with similar CWC Number already exists. Please correct before proceeding");
                    jq('#cwcNumberError').show();
                    jq('#cwc-id input[type=text]').focus();
                }
            });
        }

        //Clear hidden sections
        clearHiddenSections = function(parentObj) {
            parentObj.find('input[type=radio]').each(function() {
                this.checked = false;
            });
            parentObj.find('input[type=checkbox]').each(function() {
                this.checked = false;
            });
            parentObj.find('input[type=text]').each(function() {
                jq(this).val("");
            });
            parentObj.find('select').each(function() {
                this.selectedIndex =0;
            });
        }

	</script>

	<div class="ke-form-header">
		<table style="width: 100%">
			<tr>
				<td>
					<ifMode mode="EDIT">
						<script type="text/javascript">
                            jq(function(){
                                if (getValue('hiv-exposed-child.value') == '') {
                                    jq('#arv-prophylaxis :input').prop('disabled', true);
                                    jq('#on-art-at-enrollment-of-infant :input').prop('disabled', true);
                                    jq('#hei-identifiers').hide();
                                    //jq('#hei-id :input').prop('disabled', true);
                                    //jq('#spd :input').prop('disabled', true);
                                    clearHiddenSections(jq('#arv-prophylaxis-no'));
                                    clearHiddenSections(jq('#on-art-at-enrollment-of-infant'));
                                    clearHiddenSections(jq('#hei-id'));
                                    clearHiddenSections(jq('#spd'));
                                    getField('child-prophylaxis.value').val("");
                                    clearHiddenSections(jq('#child-nvp'));
                                    clearHiddenSections(jq('#mother-on-art-at-enrollment1'));
                                    clearHiddenSections(jq('#onART'));
                                    clearHiddenSections(jq('#facility-registered'));
                                }

                                if (getValue('hiv-exposed-child.value') == EXPOSURE_TO_HIV_ID) {
                                    jq('#hei-identifiers').show();
                                    jq('#hei-id :input').prop('disabled', false);
                                    jq('#spd :input').prop('disabled', false);
                                    jq('#arv-prophylaxis :input').prop('disabled', false);
                                    jq('#on-art-at-enrollment-of-infant :input').prop('disabled', false);
                                }

                                if (getValue('hiv-exposed-child.value') == NO_CONCEPT_ID || getValue('hiv-exposed-child.value') == UNKOWN) {
                                    jq('#arv-prophylaxis :input').prop('disabled', true);
                                    jq('#on-art-at-enrollment-of-infant :input').prop('disabled', true);
                                    jq('#hei-identifiers').hide();
                                    //jq('#hei-id :input').prop('disabled', true);
                                    //jq('#spd :input').prop('disabled', true);
                                    clearHiddenSections(jq('#arv-prophylaxis-no'));
                                    clearHiddenSections(jq('#on-art-at-enrollment-of-infant'));
                                    clearHiddenSections(jq('#hei-id'));
                                    clearHiddenSections(jq('#spd'));
                                    getField('child-prophylaxis.value').val("");
                                    clearHiddenSections(jq('#child-nvp'));
                                    clearHiddenSections(jq('#mother-on-art-at-enrollment1'));
                                    clearHiddenSections(jq('#onART'));
                                    clearHiddenSections(jq('#facility-registered'));
                                }
                            });
						</script>
					</ifMode>
				</td>
				<td>Enrollment date: <encounterDate id="encounter-date" showTime="true" /></td>
				<td>Enrolled at: <encounterLocation default="GlobalProperty:kenyaemr.defaultLocation" /></td>
			</tr>
		</table>
	</div>

	<div class="ke-form-content">
		<table class="hei" align="center">
			<tbody>
			<tr>
				<td colspan="3" style="background-color: #696969; color: #ffffff; text-align:center;">
					Mch Child Enrollment Form</td>
			</tr>

			<tr>
				<td colspan="3">
					Cohort by month and year of Birth:   MM-YYYY
					<span id="calculated-cohort" class="value"></span>					</td>
			</tr>
			<tr>
				<td colspan="3" style="background-color: #696969; color: #ffffff;">
					SECTION I </td>
			</tr>
			<tr>
				<td valign="top">Particulars of the child </td>
				<td colspan="2">
					<table>
						<tr>
							<td>Date first seen</td>
							<td><obs conceptId="162140AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" showTime="false" /></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<td>Gestation at birth(weeks)</td>
							<td><obs conceptId="1409AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"  id="gestation"/> </td>
							<td>Birth Weight: (kg)</td>
							<td><obs conceptId="5916AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" id="weight"/></td>
							<td>Birth length in cm </td>
							<td><obs conceptId="1503AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/></td>
						</tr>
						<tr>
							<td>Birth Order in Family (1,2,3) </td>
							<td><obs conceptId="163460AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/></td>
							<td>Birth type: </td>
							<td><obs conceptId="159949AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptIds="159913AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,159914AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,159915AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,113450AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,113440AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabels="Single,Twins,Triplets,Quadruplets,Quintuplets" style="dropdown" id="birth-outcome"/></td>
							<td>Place of delivery</td>
							<td>
								<obs conceptId="1572AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptIds="1589AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1536AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,5622AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabels="Facility,Home,Other" id="birth-place" style="dropdown"/>							  </td>
						</tr>
						<tr>
							<td>Mode of Delivery  </td>
							<td><obs conceptId="5630AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptIds="1170AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1171AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabels="SVD,C-Section" id="birth-type" style="radio"/></td>
							<td colspan="4"></td>
						</tr>
					</table>					</td>
			</tr>

			<tr>
				<td valign="top">Registration Details </td>
				<td colspan="2"><table border="0" cellspacing="0" cellpadding="0">
					<tr>
						<td>Birth Notification Number</td>
						<td><obs conceptId="162051AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" /></td>
						<td>Date Issued </td>
						<td><obs conceptId="164129AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" /></td>
						<td></td>
						<td></td>
					</tr>
					<tr>
						<td>Birth certificate Number </td>
						<td><obs conceptId="162052AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" /></td>
						<td>Date of registration </td>
						<td><obs conceptId="164130AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" /></td>
						<td>Place of registration </td>
						<td><obs conceptId="164140AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" /> </td>
					</tr>
					<tr>
						<td>Health facility name:</td>
						<td><obs conceptId="162724AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" /></td>
						<td>Patient Clinic No. </td>
						<td>
							<span id="pcn-id"><patient id="pcn" field="identifier" identifierTypeId="b4d66522-11fc-45c7-83e3-39a1af21ae0d" /></span>
							<span id="pcnError" class="error"></span>
						</td>
						<td></td>
						<td></td>
					</tr>
					<tr>
						<td>CWC No <br />
							Format:(CWC-MFL code-serial number) e.g <strong>CWC-15007-00001 </strong> </td>
						<td><span id="cwc-id"><patient field="identifier" identifierTypeId="1dc8b419-35f2-4316-8d68-135f0689859b" /></span>
						</td>
						<td>Permanent Register Number </td>
						<td><obs conceptId="1646AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" /></td>
						<td></td>
						<td></td>
					</tr>
					<tr><td><span id="cwcNumberError" class="error"></span></td></tr>
					<tr>
						<td colspan="4">National Unique Patient Identifier <patient field="identifier" identifierTypeId="f85081e2-b4be-4e48-b3a4-7994b69bb101" required="false" /></td>
						<td></td>
						<td></td>
					</tr>
				</table></td>
			</tr>
			<tr>
				<td valign="top">Contact details </td>
				<td colspan="2"><table border="0" cellspacing="0" cellpadding="0">
					<tr>
						<td>Father's Name:  </td>
						<td><div id="father-name-list" class="value">						</div></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
					<tr>
						<td>Mother's Name</td>
						<td><div id="mother-name-list" class="value">						</div></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
					<tr>
						<td>Guardian's Name </td>
						<td><div id="guardian-name-list" class="value">						</div></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
					<tr>
						<td>Community Health Worker's Name &#160;&#160; </td>
						<td><obs conceptId="164141AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" /></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
					<tr>
						<br/>
					</tr>
					<tr>
						<td>Alternative contact's name  </td><br />
						<td><obs conceptId="162729AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" required="false"/></td>
						<td></td>
						<td></td>
						<td>Contacts: </td>
						<td><obs conceptId="159635AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" required="false"/></td>
					</tr>
				</table></td>
			</tr>
			<tr>
				<td>Special Care </td>
				<td colspan="2">
					<table>
						<tbody>
						<tr>
							<th colpan="2">Does the child need special care?
								<obs conceptId="161630AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptIds="161628AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabels="Yes,No" style="radio" id="specialCare"/></th>
						</tr>
						<tr id="reasonsForSpecialCare">
							<th colpan="2">Reasons For  Special Care(<i>Tick as appropriate</i>)</th>
							<td>
								<obs conceptId="161601AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="116222AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Birth weight less than 2.5 kg" style="checkbox" /> <br />
								<obs conceptId="161601AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="162071AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Birth less than 2 years after last birth" style="checkbox" /> <br />
								<obs conceptId="161601AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="162072AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Fifth or more child" style="checkbox" /><br />
								<obs conceptId="161601AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="162073AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Teenage mother" style="checkbox" /> <br />
								<obs conceptId="161601AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="162074AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Brother or sisters undernourished" style="checkbox" />									</td>
							<td>
								<obs conceptId="161601AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="162075AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Multiple births(Twins,triplets)" style="checkbox" /> <br />
								<obs conceptId="161601AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="162076AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Child in family dead" style="checkbox" /> <br />
								<obs conceptId="161601AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="1174AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Orphan" style="checkbox" /> <br />
								<obs conceptId="161601AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="161599AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Child has disability" style="checkbox" /> <br />
								<obs conceptId="161601AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="1859AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Parent HIV positive" style="checkbox" /> <br />
								<obs conceptId="161601AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="123174AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="History/signs of child abuse/neglect" style="checkbox" />									</td>
						</tr>
						</tbody>
					</table>					</td>
			</tr>
			<tr>
				<td>Exposure History </td>
				<td colspan="2">
					HIV Exposed Child?
					<obs conceptId="5303AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
						 answerConceptIds="822AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1067AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
						 answerLabels="Yes,No,Unknown"
						 id="hiv-exposed-child" style="radio" /><br />
					<div id="child-status-required" class="error"></div>
				</td>
				<div id="child-status-exposed" class="error"></div>
			</tr>
			<tr>
				<td colspan="3" style="background-color: #696969; color: #ffffff;">
					SECTION II				  </td>
			</tr>
			<tr id="hei-identifiers">
				<td>HEI Registration </td>
				<td colspan="2">
					<table>
						<tr>
							<td>HEI ID Number</td>
							<td><span id="hei-id"><patient field="identifier" identifierTypeId="0691f522-dd67-4eeb-92c8-af5083baf338" required="false" /></span></td>
							<span id="heiNumberError" class="error"></span>
							<td>SPD No</td>
							<td id="spd"><obs conceptId="162054AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"  required="false"/></td>
						</tr>
					</table>				  </td>
			</tr>
			<tr id="mother-details">
				<td>Mother Details </td>
				<td colspan="2">
					<table>
						<tr>
							<td>Mother Alive? </td>
							<td><obs conceptId="160429AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"  class="mother-alive" style="yes_no"/></td>
						</tr>
						<tr>
							<td>History of TB Contact in Household? </td>
							<td><obs conceptId="152460AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabels="Yes,No" style="radio" id="tbcontact"/></td>
							<td colspan="2"><span id="yesTbContact" class="value">Screen for TB; and appropriately refer for INH Prophylaxis</span></td>
						</tr>
						<tr>
							<td>Is the mother Breastfeeding? </td>
							<td><obs conceptId="159941AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1067AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabels="Yes,No,Unknown" style="radio"/></td>
							<td></td>
							<td></td>
						</tr>
					</table>
				</td>
			</tr>
			<tr>
				<td>Referral details </td>
				<td colspan="2">
					<table>
						<tr>
							<td>Source of Referral
								<obs style="radio" answerSeparator=" "
									 conceptId="160540AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
									 answerConceptIds="160537AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,160542AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,160456AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162050AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,160538AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,5622AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
									 answerLabels="Paediatric,OPD,Maternity,CCC,MCH/PMTCT,Other"
								/>								</td>
						</tr>
						<tr>
							<td>Transfer in?

								<obs id="transfer-status" conceptId="160563AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="radio"
									 answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
									 answerLabels="Yes,No"
								/>								</td>
						</tr>
						<tr>
							<td>
								<div id="transfer-details">
									<table>
										<tr>
											<td>Transfer in date:</td>
											<td><obs conceptId="160534AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" /></td>
											<td>Transferred from facility:</td>
											<td><obs conceptId="160535AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" /></td>
										</tr>
										<tr>
											<td>in district:</td>
											<td> <obs conceptId="161551AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" /></td>
											<td>Date <i>first</i> enrolled in HEI care:</td>
											<td><obs conceptId="160555AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" /></td>
										</tr>
									</table>
								</div>								</td>
						</tr>
					</table>					</td>
			</tr>
			<tr id="arv-prophylaxis">
				<td valign="top">Child ARV Prophylaxis</td>
				<obsgroup groupingConceptId="1638AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
					<td colspan="2">
						<table border="0" cellspacing="0" cellpadding="0">
							<tr>
								<td>Type of ARV prophylaxis</td>
								<td colspan="2"><obs conceptId="1282AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
													 answerConceptIds="80586AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1652AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162326AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,160123AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,78643AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1652AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1149AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1107AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
													 answerLabels="Sd NVP Only,sd NVP+AZT+3TC,NVP for 6 weeks(Mother on HAART),AZT Liquid BD for 6 weeks,3TC Liquid BD,AZT/NVP,None,Other"
													 style="dropdown"
													 id="child-prophylaxis"/>
								</td>
								<td>&#160;&#160;&#160;&#160;&#160;&#160;&#160;</td>
								<td>NVP during BF? </td>
								<td><obs conceptId="1282AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
										 style="checkbox"
										 answerConceptId="80586AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
										 answerLabel=""
										 id="child-nvp"/></td>
							</tr>
						</table>
					</td>
				</obsgroup>
			</tr>
			<tr id="mother-arv-prophylaxis">
				<td>Mother's ARV profile </td>
				<td colspan="2">
					<table border="0" cellspacing="0" cellpadding="0">
						<tr>
							<td> Facility registered: </td>
							<td><obs conceptId="162724AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" id="facility-registered" size="25"/></td>
							<td id="mother-on-art-at-enrollment1"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;Mother's CCC No. <obs conceptId="162053AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"  id="mothers-ccc" size="15"/></td>
						</tr>
						<tr>
							<td>Mother On ART at Enrollment of Infant	</td>
							<td id="on-art-at-enrollment-of-infant"><obs conceptId="162055AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabels="Yes,No" style="radio" id="onART"  />
							</td>
							<td>&#160;&#160;&#160;&#160;&#160;&#160;If yes, select regimen</td>
							<td id="mother-on-art-at-enrollment">
								<obs conceptId="1088AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
									 answerConceptIds="164505AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,792AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,160124AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,160104AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1652AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,161361AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,104565AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162201AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,817AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,
							                       162199AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162200AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162565AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1652AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162561AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,164511AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,164512AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162560AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,
                                                     162563AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162562AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162559AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
									 answerLabels="TDF/3TC/EFV,
								               D4T/3TC/NVP,
											   AZT/3TC/EFV,
											   D4T/3TC/EFV,
											   3TC/NVP/AZT,
											   EDF/3TC/EFV,
											   EFV/FTC/TDF,
											   3TC/LPV/TDF/r,
											   ABC/3TC/AZT,
										       ABC/NVP/3TC,
											   3TC/ABC/LPV/r,
							                   3TC/NVP/TDF,
                                               3TC/NVP/AZT,
                                               3TC/AZT/LPV/r,
                                               AZT-3TC-ATV/r,
                                               TDF-3TC-ATV/r,
                                               3TC/D4T/LPV/r,
                                               3TC/ABC/EFV,
                                               ABC/LPV/R/TDF,
                                               ABC/DDI/LPV/r"
									 id="current-mothers-regimen"
								/>
							</td>
						</tr>
					</table></td>
			</tr>

			<enrollInProgram programId="c2ecdf11-97cd-432a-a971-cfd9bd296b83"/>
			</tbody>
		</table>
	</div>
	<div class="ke-form-footer">
		<submit />
	</div>
</htmlform>